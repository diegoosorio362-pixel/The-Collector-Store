<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Collector Store - ¬°Tienda Autom√°tica con GitHub Actions!</title>
    
    <!-- Supabase SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        // Verificar que Supabase se carg√≥ correctamente
        console.log('üîç Verificando Supabase SDK...');
        console.log('window.supabase disponible:', !!window.supabase);
        // Configuraci√≥n de Supabase
        const supabaseConfig = {
            // AQU√ç VA TU CONFIGURACI√ìN DE SUPABASE
            // Reemplaza estos valores con los de tu proyecto
            url: 'https://newqnezadbulxfadvbjt.supabase.co',
            anonKey: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5ld3FuZXphZGJ1bHhmYWR2Ymp0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc1NTc4MDMsImV4cCI6MjA3MzEzMzgwM30.wcnpz2cqlIbe68y7wxgiS1mEDYDHsmaEt9f_A0veabA'
        };

        // Inicializar Supabase
        let supabase = null;
        if (supabaseConfig.url !== 'https://tu-proyecto.supabase.co') {
            try {
                supabase = window.supabase.createClient(supabaseConfig.url, supabaseConfig.anonKey);
                console.log('üêò Supabase inicializado correctamente');
            } catch (error) {
                console.error('‚ùå Error al inicializar Supabase:', error);
                supabase = null;
            }
        } else {
            console.log('‚ö†Ô∏è Supabase no configurado - usando localStorage');
        }

        // Hacer disponible globalmente
        window.supabase = supabase;
    </script>
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden;
        }
        
        img {
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;
            image-rendering: high-quality;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            -webkit-transform: translateZ(0);
            transform: translateZ(0);
            /* Optimizaci√≥n de carga */
            loading: lazy;
            will-change: transform;
        }
        
        body {
            background: 
                radial-gradient(circle at 25% 25%, #ffd700 30px, transparent 30px),
                radial-gradient(circle at 75% 75%, #ff6b35 25px, transparent 25px),
                radial-gradient(circle at 50% 10%, #ffd700 20px, transparent 20px),
                radial-gradient(circle at 10% 60%, #ff6b35 35px, transparent 35px),
                radial-gradient(circle at 90% 40%, #ffd700 15px, transparent 15px),
                repeating-linear-gradient(45deg, 
                    transparent 0px, 
                    transparent 10px, 
                    #ffd700 10px, 
                    #ffd700 12px
                ),
                repeating-linear-gradient(-45deg, 
                    transparent 0px, 
                    transparent 8px, 
                    #ff6b35 8px, 
                    #ff6b35 10px
                ),
                linear-gradient(135deg, #1a1a1a, #2d2d2d);
            background-size: 150px 150px, 120px 120px, 100px 100px, 180px 180px, 80px 80px, 20px 20px, 15px 15px, 100% 100%;
            background-attachment: fixed;
            min-height: 100vh;
            position: relative;
            image.png        }

        /* Efectos de part√≠culas optimizados */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(1px 1px at 20px 30px, rgba(255, 215, 0, 0.2), transparent),
                radial-gradient(1px 1px at 40px 70px, rgba(255, 107, 53, 0.2), transparent);
            background-repeat: repeat;
            background-size: 300px 300px;
            animation: particleFloat 30s linear infinite;
            pointer-events: none;
            z-index: 1;
            will-change: transform;
        }

        @keyframes particleFloat {
            0% { transform: translateY(0px); }
            100% { transform: translateY(-100px); }
        }
        .header { 
            background: transparent !important; 
            color: white; 
            padding: 1rem 0; 
            position: fixed; 
            top: 0; 
            width: 100%; 
            z-index: 1000;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: none;
            box-shadow: none;
        }
        
        .header.scrolled .nav-menu {
            opacity: 0;
            transform: translateY(-20px);
            pointer-events: none;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .nav-container { max-width: 1200px; margin: 0 auto; padding: 0 20px; display: flex; justify-content: space-between; align-items: center; }
        .logo { 
            font-size: 1.8rem; 
            font-weight: bold; 
            display: flex; 
            align-items: center; 
            gap: 10px; 
            transition: all 0.3s ease;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 10px;
            text-decoration: none;
            color: inherit;
        }
        .logo:hover {
            transform: scale(1.1);
            background: rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
        }
        .logo img { 
            width: 45px; 
            height: 45px; 
            border-radius: 50%; 
            transition: all 0.3s ease;
        }
        .logo:hover img {
            transform: rotate(360deg) scale(1.2);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
        }
        .logo-text {
            transition: all 0.4s ease;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            font-size: 1.8rem;
            opacity: 0;
            transform: scale(0) translateX(-100px);
            max-width: 0;
            white-space: nowrap;
            overflow: hidden;
            visibility: hidden;
        }
        .logo:hover .logo-text {
            color: #ffd700;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
            transform: scale(0.7) translateX(0);
            font-weight: 900;
            letter-spacing: 1px;
            opacity: 1;
            max-width: 500px;
            visibility: visible;
        }
        .nav-menu { 
            display: flex; 
            list-style: none; 
            gap: 2rem; 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .nav-link { 
            color: white; 
            text-decoration: none; 
            font-weight: 500; 
            transition: color 0.3s; 
        }
        .nav-link:hover { color: #ffd700; }
        .nav-actions { 
            display: flex; 
            gap: 1rem; 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .btn { 
            background: #ffd700; 
            color: #1a1a1a; 
            border: none; 
            padding: 0.5rem 1rem; 
            border-radius: 25px; 
            cursor: pointer; 
            font-weight: 600; 
            transition: all 0.3s; 
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }
        .btn:hover { background: #ffed4e; transform: translateY(-2px); }
        .hero { background: linear-gradient(135deg, #ff6b35, #f7931e); min-height: 100vh; display: flex; align-items: center; padding-top: 80px; position: relative; }
        .hero-content { max-width: 1200px; margin: 0 auto; padding: 0 20px; display: grid; grid-template-columns: 1fr 1fr; gap: 4rem; align-items: center; }
        .hero-title { font-size: 3rem; font-weight: 900; color: white; margin-bottom: 1rem; line-height: 1.2; }
        .hero-subtitle { font-size: 1.2rem; color: rgba(255, 255, 255, 0.9); margin-bottom: 2rem; }
        .hero-buttons { display: flex; gap: 1rem; flex-wrap: wrap; }
        .btn-primary { background: #ffd700; color: #1a1a1a; padding: 1rem 2rem; font-size: 1rem; }
        .btn-secondary { background: transparent; color: white; border: 2px solid white; padding: 1rem 2rem; font-size: 1rem; }
        .btn-secondary:hover { background: white; color: #ff6b35; }
        .hero-image { text-align: center; }
        .hero-img { 
            max-width: 100%; 
            height: auto; 
            filter: drop-shadow(0 10px 30px rgba(0,0,0,0.3)); 
            animation: float 3s ease-in-out infinite;
            will-change: transform;
        }
        @keyframes float { 
            0%, 100% { transform: translate3d(0, 0, 0); } 
            50% { transform: translate3d(0, -20px, 0); } 
        }
        @keyframes fadeIn { 
            from { opacity: 0; transform: translate3d(0, 20px, 0); } 
            to { opacity: 1; transform: translate3d(0, 0, 0); } 
        }
        @keyframes fadeInOut { 
            0% { opacity: 0; transform: translate3d(-50%, -50%, 0) scale(0.8); } 
            20% { opacity: 1; transform: translate3d(-50%, -50%, 0) scale(1.1); } 
            80% { opacity: 1; transform: translate3d(-50%, -50%, 0) scale(1); } 
            100% { opacity: 0; transform: translate3d(-50%, -50%, 0) scale(0.8); } 
        }
        @keyframes slideInLeft { 
            from { opacity: 0; transform: translate3d(-100px, 0, 0); } 
            to { opacity: 1; transform: translate3d(0, 0, 0); } 
        }
        @keyframes slideInRight { 
            from { opacity: 0; transform: translate3d(100px, 0, 0); } 
            to { opacity: 1; transform: translate3d(0, 0, 0); } 
        }
        @keyframes bounceIn { 
            0% { opacity: 0; transform: scale3d(0.3, 0.3, 1); } 
            50% { opacity: 1; transform: scale3d(1.05, 1.05, 1); } 
            70% { transform: scale3d(0.9, 0.9, 1); } 
            100% { opacity: 1; transform: scale3d(1, 1, 1); } 
        }
        @keyframes pulse { 
            0% { transform: scale3d(1, 1, 1); } 
            50% { transform: scale3d(1.05, 1.05, 1); } 
            100% { transform: scale3d(1, 1, 1); } 
        }
        @keyframes shimmer { 0% { background-position: -200px 0; } 100% { background-position: calc(200px + 100%) 0; } }
        .section { padding: 5rem 0; background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(5px); }
        
        /* Slider de productos destacados */
        .hero-slider {
            padding: 5rem 0;
            background: linear-gradient(135deg, #1a1a1a, #2d2d2d, #3a3a3a);
            position: relative;
            overflow: hidden;
        }
        .hero-slider::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 20%, rgba(255, 215, 0, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(255, 107, 53, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 60%, rgba(255, 215, 0, 0.05) 0%, transparent 50%);
            opacity: 0.8;
        }
        .slider-container {
            position: relative;
            max-width: 1000px;
            margin: 0 auto;
            z-index: 2;
        }
        .slider-track {
            position: relative;
            width: 100%;
            height: 400px;
        }
        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transform: scale(0.8);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1;
        }
        .slide.active {
            opacity: 1;
            transform: scale(1);
            z-index: 2;
        }
        .slide-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
            align-items: center;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 3rem;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            border: 2px solid rgba(255, 255, 255, 0.5);
            height: 100%;
            width: 100%;
        }
        .slide-image {
            text-align: center;
        }
        .slide-img {
            max-width: 100%;
            height: 300px;
            object-fit: contain;
            filter: drop-shadow(0 10px 20px rgba(0,0,0,0.3));
            animation: pulse 2s ease-in-out infinite;
            will-change: transform;
        }
        .slide-info h3 {
            font-size: 2.5rem;
            font-weight: 800;
            color: #333;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #ff6b35, #f7931e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .slide-info p {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }
        .slide-price {
            font-size: 2rem;
            font-weight: 800;
            color: #ff6b35;
            margin-bottom: 2rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .slider-controls {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: calc(100% + 4rem);
            left: -2rem;
            display: flex;
            justify-content: space-between;
            pointer-events: none;
        }
        .slider-btn {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            pointer-events: all;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            color: #ff6b35;
        }
        .slider-btn:hover {
            background: rgba(255, 255, 255, 1);
            transform: scale(1.1);
            box-shadow: 0 12px 30px rgba(0,0,0,0.2);
        }
        .slider-dots {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 2rem;
        }
        .dot {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .dot.active {
            background: white;
            transform: scale(1.2);
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        .section-title { font-size: 2.5rem; text-align: center; margin-bottom: 3rem; color: #333; position: relative; }
        .section-title::after { content: ''; position: absolute; bottom: -10px; left: 50%; transform: translateX(-50%); width: 80px; height: 4px; background: linear-gradient(90deg, #ff6b35, #f7931e); border-radius: 2px; }
        .filters-container { display: flex; justify-content: center; gap: 1rem; margin-bottom: 2rem; flex-wrap: wrap; }
        .filter-btn { 
            background: linear-gradient(135deg, #f8f9fa, #e9ecef); 
            border: 2px solid #e9ecef; 
            color: #666; 
            padding: 0.75rem 1.5rem; 
            border-radius: 25px; 
            cursor: pointer; 
            font-weight: 600; 
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .filter-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ff6b35, #f7931e);
            transition: left 0.3s ease;
            z-index: -1;
        }
        .filter-btn:hover::before {
            left: 0;
        }
        .filter-btn:hover { 
            color: white; 
            border-color: #ff6b35; 
            transform: translateY(-2px); 
            box-shadow: 0 4px 15px rgba(255, 107, 53, 0.3); 
        }
        .filter-btn.active { 
            background: linear-gradient(135deg, #ff6b35, #f7931e); 
            color: white; 
            border-color: #ff6b35; 
            transform: translateY(-2px); 
            box-shadow: 0 4px 15px rgba(255, 107, 53, 0.3); 
        }
        .filter-count {
            background: rgba(255, 255, 255, 0.2);
            color: inherit;
            padding: 0.2rem 0.5rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 700;
            margin-left: 0.5rem;
            min-width: 20px;
            text-align: center;
            display: inline-block;
        }
        .filter-btn.active .filter-count {
            background: rgba(255, 255, 255, 0.3);
        }
        .search-container { display: flex; justify-content: center; margin-bottom: 2rem; }
        .search-input { padding: 0.8rem 1.5rem; border: 2px solid #e0e0e0; border-radius: 25px; width: 300px; font-size: 1rem; outline: none; transition: all 0.3s; }
        .search-input:focus { border-color: #ff6b35; box-shadow: 0 0 10px rgba(255, 107, 53, 0.2); }
        .products-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; margin-top: 2rem; }
        .product-card { 
            background: rgba(255, 255, 255, 0.98); 
            border-radius: 20px; 
            overflow: hidden; 
            box-shadow: 0 8px 32px rgba(0,0,0,0.1); 
            transition: transform 0.3s ease, box-shadow 0.3s ease; 
            position: relative;
            border: 1px solid rgba(255, 255, 255, 0.2);
            will-change: transform;
        }
        .product-card:hover { 
            transform: translateY(-10px) scale(1.02); 
            box-shadow: 0 15px 30px rgba(0,0,0,0.2);
            background: rgba(255, 255, 255, 1);
        }
        .product-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 107, 53, 0.1));
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }
        .product-card:hover::before {
            opacity: 1;
        }
        .product-image { 
            width: 100%; 
            height: 250px; 
            object-fit: cover; 
            transition: all 0.4s ease; 
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;
            image-rendering: high-quality;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            -webkit-transform: translateZ(0);
            transform: translateZ(0);
        }
        .product-card:hover .product-image { 
            transform: scale(1.1); 
            filter: brightness(1.05);
        }
        .product-info { padding: 1.5rem; position: relative; }
        .product-badge { 
            position: absolute; 
            top: 10px; 
            right: 10px; 
            color: white; 
            padding: 0.3rem 0.8rem; 
            border-radius: 15px; 
            font-size: 0.8rem; 
            font-weight: 600; 
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .product-badge.wcf { background: linear-gradient(135deg, #2196F3, #1976D2); }
        .product-badge.gashapon { background: linear-gradient(135deg, #FF9800, #F57C00); }
        .product-badge.custom { background: linear-gradient(135deg, #9C27B0, #7B1FA2); }
        .product-badge.replica { background: linear-gradient(135deg, #607D8B, #455A64); }
        .product-badge.original { background: linear-gradient(135deg, #4CAF50, #388E3C); }
        .product-title { font-size: 1.2rem; font-weight: 600; margin-bottom: 0.5rem; color: #333; text-align: center; }
        .product-description { color: #666; margin-bottom: 1rem; font-size: 0.9rem; }
        .product-price { font-size: 1.5rem; font-weight: 700; color: #ff6b35; margin-bottom: 1rem; }
        .add-to-cart { 
            width: 100%; 
            background: linear-gradient(135deg, #ff6b35, #f7931e); 
            color: white; 
            border: none; 
            padding: 1rem; 
            border-radius: 12px; 
            font-weight: 700; 
            cursor: pointer; 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(255, 107, 53, 0.3);
        }
        .add-to-cart::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }
        .add-to-cart:hover { 
            background: linear-gradient(135deg, #f7931e, #ffd700); 
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 8px 25px rgba(255, 107, 53, 0.4);
        }
        .add-to-cart:hover::before {
            left: 100%;
        }
        .add-to-cart:active {
            transform: translateY(-1px) scale(0.98);
        }
        .categories-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem; margin-top: 2rem; }
        .category-card { background: white; padding: 2rem; border-radius: 15px; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1); transition: all 0.3s; cursor: pointer; border: 2px solid transparent; }
        .category-card:hover { transform: translateY(-5px); box-shadow: 0 8px 25px rgba(0,0,0,0.15); border-color: #ff6b35; }
        .category-icon { font-size: 3rem; margin-bottom: 1rem; }
        .category-card h3 { font-size: 1.3rem; font-weight: 600; margin-bottom: 0.5rem; color: #333; }
        .category-card p { color: #666; font-size: 0.9rem; }
        .footer { background: #1a1a1a; color: white; padding: 3rem 0 1rem; }
        .footer-content { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem; margin-bottom: 2rem; }
        .footer-section h4 { font-size: 1.2rem; margin-bottom: 1rem; color: #ffd700; }
        .footer-section p { margin-bottom: 1rem; color: rgba(255, 255, 255, 0.8); }
        .footer-section ul { list-style: none; }
        .footer-section ul li { margin-bottom: 0.5rem; }
        .footer-section ul li a { color: rgba(255, 255, 255, 0.8); text-decoration: none; transition: color 0.3s; }
        .footer-section ul li a:hover { color: #ffd700; }
        .footer-bottom { text-align: center; padding-top: 2rem; border-top: 1px solid rgba(255, 255, 255, 0.1); color: rgba(255, 255, 255, 0.6); }
        .cart-sidebar { 
            position: fixed; 
            top: 0; 
            right: -450px; 
            width: 450px; 
            height: 100vh; 
            background: linear-gradient(145deg, #ffffff, #f8f9fa); 
            box-shadow: -10px 0 30px rgba(0,0,0,0.15), -5px 0 15px rgba(0,0,0,0.1); 
            transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1); 
            z-index: 1001; 
            display: flex; 
            flex-direction: column;
            border-left: 1px solid rgba(255, 107, 53, 0.1);
        }
        .cart-sidebar.active { right: 0; }
        .cart-header { 
            padding: 2rem; 
            border-bottom: 2px solid rgba(255, 107, 53, 0.1); 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            background: linear-gradient(135deg, #ff6b35, #f7931e, #ffd700); 
            color: white; 
            position: relative;
            overflow: hidden;
        }
        .cart-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="75" cy="75" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="50" cy="10" r="0.5" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            opacity: 0.3;
        }
        .cart-header h3 { 
            margin: 0; 
            font-size: 1.8rem; 
            font-weight: 700; 
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
            position: relative;
            z-index: 1;
        }
        .cart-close { 
            background: rgba(255, 255, 255, 0.15); 
            border: 1px solid rgba(255, 255, 255, 0.3); 
            color: white; 
            font-size: 1.2rem; 
            cursor: pointer; 
            padding: 0.5rem; 
            border-radius: 50%; 
            transition: all 0.3s ease; 
            position: relative;
            z-index: 1;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .cart-close:hover { 
            background: rgba(255, 255, 255, 0.25); 
            border-color: rgba(255, 255, 255, 0.5);
            transform: scale(1.05);
        }
        .cart-items { 
            flex: 1; 
            padding: 1.5rem; 
            overflow-y: auto; 
            background: linear-gradient(180deg, rgba(255, 107, 53, 0.02), transparent);
        }
        .cart-item { 
            display: flex; 
            flex-direction: column;
            gap: 1rem; 
            padding: 1.5rem; 
            margin-bottom: 1rem;
            background: white; 
            border-radius: 16px; 
            box-shadow: 0 4px 12px rgba(0,0,0,0.08), 0 2px 4px rgba(0,0,0,0.04); 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
            border: 1px solid rgba(255, 107, 53, 0.1);
            position: relative;
            overflow: hidden;
        }
        .cart-item-main {
            display: flex;
            align-items: flex-start;
            gap: 1.25rem;
        }
        .cart-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #ff6b35, #f7931e, #ffd700);
            opacity: 0;
            transition: opacity 0.3s;
        }
        .cart-item:hover { 
            background: linear-gradient(145deg, #ffffff, #f8f9fa); 
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.12), 0 4px 8px rgba(0,0,0,0.06);
        }
        .cart-item:hover::before {
            opacity: 1;
        }
        .cart-item-image { 
            width: 90px; 
            height: 90px; 
            object-fit: cover; 
            border-radius: 12px; 
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: all 0.3s;
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;
            image-rendering: high-quality;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            -webkit-transform: translateZ(0);
            transform: translateZ(0);
            filter: contrast(1.1) brightness(1.05);
        }
        .cart-item:hover .cart-item-image {
            transform: scale(1.05);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }
        .cart-item-info { 
            flex: 1; 
            min-width: 0;
            margin-right: 1rem;
        }
        .cart-item-name { 
            font-weight: 700; 
            margin-bottom: 0.5rem; 
            color: #2c3e50; 
            font-size: 1.1rem;
            line-height: 1.3;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        .cart-item-price { 
            color: #ff6b35; 
            font-weight: 800; 
            font-size: 1.2rem;
            text-shadow: 0 1px 2px rgba(0,0,0,0.1);
            margin-bottom: 0.5rem;
            display: block;
        }
        .cart-item-controls { 
            display: flex; 
            align-items: center; 
            justify-content: center;
            gap: 0.75rem; 
            flex-shrink: 0;
            margin-top: 0.5rem;
        }
        .quantity-btn { 
            background: linear-gradient(135deg, #ff6b35, #f7931e); 
            color: white; 
            border: none; 
            width: 36px; 
            height: 36px; 
            border-radius: 50%; 
            cursor: pointer; 
            font-weight: bold; 
            font-size: 1.1rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
            box-shadow: 0 2px 8px rgba(255, 107, 53, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .quantity-btn:hover { 
            background: linear-gradient(135deg, #f7931e, #ffd700); 
            transform: scale(1.15); 
            box-shadow: 0 4px 12px rgba(255, 107, 53, 0.4);
        }
        .quantity-btn:active {
            transform: scale(0.95);
        }
        .quantity-btn:disabled { 
            background: linear-gradient(135deg, #bdc3c7, #95a5a6); 
            cursor: not-allowed; 
            transform: none;
            box-shadow: none;
        }
        .quantity { 
            margin: 0 0.75rem; 
            font-weight: 800; 
            min-width: 24px; 
            text-align: center; 
            font-size: 1.1rem;
            color: #2c3e50;
            background: rgba(255, 107, 53, 0.1);
            padding: 0.5rem;
            border-radius: 8px;
        }
        .remove-item { 
            background: linear-gradient(135deg, #e74c3c, #c0392b); 
            color: white; 
            border: none; 
            padding: 0.5rem 0.75rem; 
            border-radius: 8px; 
            cursor: pointer; 
            font-size: 0.9rem; 
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
            box-shadow: 0 2px 6px rgba(231, 76, 60, 0.3);
        }
        .remove-item:hover { 
            background: linear-gradient(135deg, #c0392b, #a93226); 
            transform: scale(1.05); 
            box-shadow: 0 4px 10px rgba(231, 76, 60, 0.4);
        }
        .cart-footer { 
            padding: 2rem; 
            border-top: 2px solid rgba(255, 107, 53, 0.1); 
            background: linear-gradient(145deg, #ffffff, #f8f9fa); 
            position: relative;
            overflow: hidden;
        }
        .cart-footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, #ff6b35, transparent);
        }
        .cart-total { 
            font-size: 1.8rem; 
            font-weight: 800; 
            margin-bottom: 1.5rem; 
            text-align: center; 
            color: #2c3e50; 
            text-shadow: 0 1px 2px rgba(0,0,0,0.1);
            background: linear-gradient(135deg, #ff6b35, #f7931e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .cart-actions { 
            display: flex; 
            gap: 1rem; 
        }
        .btn-checkout { 
            background: linear-gradient(135deg, #27ae60, #2ecc71); 
            color: white; 
            border: none; 
            padding: 1.25rem 1.5rem; 
            border-radius: 12px; 
            font-weight: 700; 
            font-size: 1.1rem;
            cursor: pointer; 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
            flex: 1; 
            box-shadow: 0 4px 15px rgba(39, 174, 96, 0.3);
            position: relative;
            overflow: hidden;
        }
        .btn-checkout::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        .btn-checkout:hover { 
            background: linear-gradient(135deg, #2ecc71, #27ae60); 
            transform: translateY(-3px); 
            box-shadow: 0 8px 25px rgba(39, 174, 96, 0.4);
        }
        .btn-checkout:hover::before {
            left: 100%;
        }
        .btn-checkout:active {
            transform: translateY(-1px);
        }
        .btn-clear { 
            background: linear-gradient(135deg, #e74c3c, #c0392b); 
            color: white; 
            border: none; 
            padding: 1.25rem 1.5rem; 
            border-radius: 12px; 
            font-weight: 700; 
            font-size: 1.1rem;
            cursor: pointer; 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
            box-shadow: 0 4px 15px rgba(231, 76, 60, 0.3);
        }
        .btn-clear:hover { 
            background: linear-gradient(135deg, #c0392b, #a93226); 
            transform: translateY(-3px); 
            box-shadow: 0 8px 25px rgba(231, 76, 60, 0.4);
        }
        .btn-clear:active {
            transform: translateY(-1px);
        }
        .cart-empty { 
            text-align: center; 
            padding: 3rem 2rem; 
            color: #7f8c8d; 
            background: linear-gradient(145deg, #ffffff, #f8f9fa);
            border-radius: 16px;
            margin: 1rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }
        .cart-empty-icon { 
            margin-bottom: 1.5rem; 
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.1));
            transition: all 0.3s;
        }
        .cart-empty-icon:hover {
            transform: scale(1.1) rotate(5deg);
        }
        .cart-empty p {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }
        .cart-empty p:last-child {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        .modal { 
            display: none; 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: rgba(0,0,0,0.6); 
            backdrop-filter: blur(5px);
            z-index: 1002; 
            align-items: center; 
            justify-content: center; 
            animation: fadeIn 0.3s ease;
        }
        .modal.active { display: flex; }
        .modal-content { 
            background: white; 
            border-radius: 20px; 
            width: 90%; 
            max-width: 450px; 
            overflow: hidden; 
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            animation: slideInUp 0.3s ease;
        }
        .modal-header { 
            padding: 2rem; 
            border-bottom: 2px solid #f0f0f0; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            background: linear-gradient(135deg, #ff6b35, #f7931e);
            color: white;
        }
        .modal-header h3 {
            margin: 0;
            font-size: 1.5rem;
            font-weight: 700;
        }
        .modal-body { padding: 2rem; }
        .form-group { margin-bottom: 1.5rem; }
        .form-group label { 
            display: block; 
            margin-bottom: 0.5rem; 
            font-weight: 600; 
            color: #333;
            font-size: 0.9rem;
        }
        .form-group input { 
            width: 100%; 
            padding: 1rem; 
            border: 2px solid #e0e0e0; 
            border-radius: 12px; 
            font-size: 1rem; 
            transition: all 0.3s ease;
            background: #fafafa;
        }
        .form-group input:focus { 
            outline: none; 
            border-color: #ff6b35; 
            background: white;
            box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);
        }
        .form-options {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        .remember-me {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            color: #666;
        }
        .remember-me input {
            width: auto;
            margin: 0;
        }
        .forgot-password {
            color: #ff6b35;
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 500;
        }
        .forgot-password:hover {
            text-decoration: underline;
        }
        .modal-divider {
            text-align: center;
            margin: 1.5rem 0;
            position: relative;
        }
        .modal-divider::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
            background: #e0e0e0;
        }
        .modal-divider span {
            background: white;
            padding: 0 1rem;
            color: #666;
            font-size: 0.9rem;
        }
        .social-login {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
            margin-bottom: 1.5rem;
        }
        .btn-social {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.8rem;
            padding: 1rem;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            background: white;
            color: #333;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .btn-social:hover {
            border-color: #ff6b35;
            background: #fafafa;
            transform: translateY(-2px);
        }
        .btn-social.google:hover {
            border-color: #4285f4;
            background: #f8f9ff;
        }
        .btn-social.facebook:hover {
            border-color: #1877f2;
            background: #f0f7ff;
        }
        .register-link, .login-link { 
            text-align: center; 
            margin-top: 1rem; 
            color: #666; 
            font-size: 0.9rem;
        }
        .register-link a, .login-link a { 
            color: #ff6b35; 
            text-decoration: none; 
            font-weight: 600;
        }
        .register-link a:hover, .login-link a:hover {
            text-decoration: underline;
        }
        .terms-checkbox {
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
            font-size: 0.9rem;
            color: #666;
            line-height: 1.4;
        }
        .terms-checkbox input {
            width: auto;
            margin: 0;
            margin-top: 0.2rem;
        }
        .terms-checkbox a {
            color: #ff6b35;
            text-decoration: none;
        }
        .terms-checkbox a:hover {
            text-decoration: underline;
        }
        .forgot-description {
            color: #666;
            margin-bottom: 1.5rem;
            text-align: center;
            line-height: 1.5;
        }

        /* Galer√≠a de im√°genes del producto */
        .product-gallery {
            position: relative;
            margin-bottom: 1rem;
        }

        .product-image-main {
            width: 100%;
            height: 250px;
            object-fit: cover;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .product-image-main:hover {
            transform: scale(1.05);
        }

        .product-thumbnails {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.5rem;
            justify-content: center;
        }

        .product-thumbnail {
            width: 50px;
            height: 50px;
            object-fit: cover;
            border-radius: 8px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .product-thumbnail:hover,
        .product-thumbnail.active {
            border-color: #ff6b35;
            transform: scale(1.1);
        }

        /* Modal de galer√≠a de producto */
        .product-gallery-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 1003;
            align-items: center;
            justify-content: center;
        }

        .product-gallery-modal.active {
            display: flex;
        }

        .gallery-content {
            position: relative;
            max-width: 90%;
            max-height: 90%;
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            display: flex;
            flex-direction: column;
        }

        .gallery-header {
            padding: 1.5rem;
            background: linear-gradient(135deg, #ff6b35, #f7931e);
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .gallery-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin: 0;
            text-align: center;
            flex: 1;
        }

        .gallery-close {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: absolute;
            right: 1.5rem;
            top: 50%;
            transform: translateY(-50%);
        }

        .gallery-body {
            padding: 2rem;
            overflow-y: auto;
            flex: 1;
            max-height: calc(90vh - 120px);
        }

        .gallery-main-image {
            width: 100%;
            max-height: 400px;
            object-fit: contain;
            border-radius: 12px;
            margin-bottom: 1rem;
        }

        .gallery-thumbnails {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .gallery-thumbnail {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 8px;
            cursor: pointer;
            border: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .gallery-thumbnail:hover,
        .gallery-thumbnail.active {
            border-color: #ff6b35;
            transform: scale(1.1);
        }

        .gallery-info {
            text-align: center;
            margin-top: 1.5rem;
        }

        .gallery-price {
            font-size: 2rem;
            font-weight: 800;
            color: #ff6b35;
            margin-bottom: 0.5rem;
        }

        .gallery-description {
            color: #666;
            margin-bottom: 1.5rem;
        }

        .gallery-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
        }

        .btn-gallery-add {
            background: linear-gradient(135deg, #ff6b35, #f7931e);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-gallery-add:hover {
            background: linear-gradient(135deg, #f7931e, #ffd700);
            transform: translateY(-2px);
        }

        /* Caracter√≠sticas del producto */
        .gallery-characteristics {
            margin: 1.5rem 0;
            padding: 1.5rem;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 12px;
            border-left: 4px solid #ff6b35;
        }

        .characteristics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .characteristic-item {
            display: flex;
            align-items: center;
            padding: 0.75rem;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .characteristic-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }

        .characteristic-icon {
            font-size: 1.2rem;
            margin-right: 0.75rem;
            min-width: 24px;
        }

        .characteristic-content {
            flex: 1;
        }

        .characteristic-label {
            font-weight: 600;
            color: #333;
            font-size: 0.9rem;
            margin-bottom: 0.25rem;
        }

        .characteristic-value {
            color: #666;
            font-size: 0.85rem;
        }

        /* Scroll personalizado para el modal */
        .gallery-body::-webkit-scrollbar {
            width: 8px;
        }

        .gallery-body::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }

        .gallery-body::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #ff6b35, #f7931e);
            border-radius: 4px;
        }

        .gallery-body::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #f7931e, #ffd700);
        }

        /* Panel de Administraci√≥n */
        .admin-toggle {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #ff6b35, #f7931e);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(255, 107, 53, 0.4);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .admin-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(255, 107, 53, 0.6);
        }

        .admin-panel {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1001;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .admin-content {
            background: white;
            border-radius: 20px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .admin-header {
            background: linear-gradient(135deg, #ff6b35, #f7931e);
            color: white;
            padding: 1.5rem;
            border-radius: 20px 20px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .admin-header h3 {
            margin: 0;
            font-size: 1.5rem;
        }

        .admin-close {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .admin-tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }

        .admin-tab {
            flex: 1;
            padding: 1rem;
            border: none;
            background: transparent;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }

        .admin-tab.active {
            background: white;
            border-bottom-color: #ff6b35;
            color: #ff6b35;
        }

        .admin-tab-content {
            padding: 2rem;
        }

        .admin-section {
            margin-bottom: 1.5rem;
        }

        .admin-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .admin-field {
            display: flex;
            flex-direction: column;
        }

        .admin-field label {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #333;
        }

        .admin-field input,
        .admin-field select,
        .admin-field textarea {
            padding: 0.75rem;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .admin-field input:focus,
        .admin-field select:focus,
        .admin-field textarea:focus {
            outline: none;
            border-color: #ff6b35;
            box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);
        }

        .admin-field textarea {
            resize: vertical;
            min-height: 100px;
        }

        .admin-btn {
            background: linear-gradient(135deg, #ff6b35, #f7931e);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .admin-btn:hover {
            background: linear-gradient(135deg, #f7931e, #ffd700);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(255, 107, 53, 0.3);
        }

        .admin-btn-secondary {
            background: linear-gradient(135deg, #6c757d, #495057);
            font-size: 0.9rem;
            padding: 0.75rem 1.5rem;
        }

        .admin-btn-secondary:hover {
            background: linear-gradient(135deg, #495057, #343a40);
        }

        /* Estad√≠sticas del panel de admin */
        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 1.5rem;
            border-radius: 12px;
            text-align: center;
            border-left: 4px solid #ff6b35;
        }

        .stat-card h3 {
            margin: 0 0 0.5rem 0;
            font-size: 1rem;
            color: #666;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: #ff6b35;
        }

        /* Tabla de usuarios */
        .users-table-container {
            overflow-x: auto;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .users-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        .users-table th {
            background: linear-gradient(135deg, #ff6b35, #f7931e);
            color: white;
            padding: 1rem 0.75rem;
            text-align: left;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .users-table td {
            padding: 0.75rem;
            border-bottom: 1px solid #e9ecef;
            font-size: 0.85rem;
        }

        .users-table tbody tr:hover {
            background: #f8f9fa;
        }

        .user-actions {
            display: flex;
            gap: 0.5rem;
        }

        .btn-small {
            padding: 0.25rem 0.5rem;
            font-size: 0.75rem;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-view {
            background: #17a2b8;
            color: white;
        }

        .btn-view:hover {
            background: #138496;
        }

        .btn-edit {
            background: #ffc107;
            color: #212529;
        }

        .btn-edit:hover {
            background: #e0a800;
        }

        .btn-delete {
            background: #dc3545;
            color: white;
        }

        .btn-delete:hover {
            background: #c82333;
        }

        /* Estilos para usuario logueado */
        .user-logged-in {
            position: relative;
        }

        .user-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            min-width: 200px;
            z-index: 1000;
            display: none;
            overflow: hidden;
        }

        .user-logged-in:hover .user-dropdown {
            display: block;
        }

        .user-dropdown a {
            display: block;
            padding: 0.75rem 1rem;
            color: #333;
            text-decoration: none;
            transition: background-color 0.3s ease;
            border-bottom: 1px solid #f0f0f0;
        }

        .user-dropdown a:hover {
            background: #f8f9fa;
            color: #ff6b35;
        }

        .user-dropdown a:last-child {
            border-bottom: none;
            color: #dc3545;
        }

        .user-dropdown a:last-child:hover {
            background: #f8d7da;
        }

        @media (max-width: 768px) {
            .admin-row {
                grid-template-columns: 1fr;
            }
            
            .admin-content {
                width: 95%;
                margin: 1rem;
            }
        }
        
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translate3d(0, 50px, 0);
            }
            to {
                opacity: 1;
                transform: translate3d(0, 0, 0);
            }
        }
        @media (max-width: 768px) { 
            .hero-content { grid-template-columns: 1fr; text-align: center; } 
            .hero-title { font-size: 2rem; } 
            .nav-menu { display: none; } 
            .cart-sidebar { width: 100%; right: -100%; }
            
            /* Slider responsive */
            .slide-content {
                grid-template-columns: 1fr;
                gap: 2rem;
                padding: 2rem;
            }
            .slide-info h3 {
                font-size: 2rem;
            }
            .slide-img {
                height: 200px;
            }
            .slider-btn {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }
            
            /* Productos responsive */
            .products-grid {
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
                gap: 1.5rem;
            }
            .product-card {
                border-radius: 15px;
            }
            .add-to-cart {
                padding: 0.8rem;
                font-size: 0.9rem;
            }
            
            /* Header responsive */
            .header {
                padding: 0.5rem 0;
            }
            .nav-container {
                padding: 0 15px;
            }
            .logo {
                font-size: 1.5rem;
            }
            .nav-actions .btn {
                padding: 0.4rem 0.8rem;
                font-size: 0.8rem;
            }
            
            /* Filtros responsive */
            .filters-container {
                gap: 0.5rem;
            }
            .filter-btn {
                padding: 0.4rem 1rem;
                font-size: 0.9rem;
            }
            .search-input {
                width: 250px;
                padding: 0.6rem 1rem;
            }
        }
        
        @media (max-width: 480px) {
            .hero-title { font-size: 1.8rem; }
            .section-title { font-size: 2rem; }
            .slide-content {
                padding: 1.5rem;
            }
            .slide-info h3 {
                font-size: 1.8rem;
            }
            .slide-price {
                font-size: 1.5rem;
            }
            .products-grid {
                grid-template-columns: 1fr;
            }
            .categories-grid {
                grid-template-columns: 1fr;
            }
            .filters-container {
                flex-direction: column;
                align-items: center;
            }
            .search-input {
                width: 100%;
                max-width: 300px;
            }
        }
    </style>
</head>
<body>

    <header class="header">
        <div class="nav-container">
            <a href="#inicio" class="logo">
                <img src="Logo.png" alt="The Collector Store" loading="lazy">
                <span class="logo-text">The Collector Store</span>
            </a>
            <ul class="nav-menu">
                <li><a href="#productos" class="nav-link">Productos</a></li>
                <li><a href="#ofertas" class="nav-link">Ofertas</a></li>
                <li><a href="#contacto" class="nav-link">Contacto</a></li>
            </ul>
            <div class="nav-actions">
                <button class="btn" onclick="toggleCart()">
                    <img src="capsula.jpg" alt="Carrito" style="width: 20px; height: 20px; border-radius: 50%; flex-shrink: 0;">
                    <span>Carrito (0)</span>
                </button>
                <button class="btn" onclick="toggleLogin()">üë§ Login</button>
            </div>
        </div>
    </header>

    <section class="hero" id="inicio">
        <div class="hero-content">
            <div class="hero-text">
                <h1 class="hero-title">The Collector Store - Figuras Coleccionables</h1>
                <p class="hero-subtitle">¬°Bienvenido a la tienda m√°s √©pica de Dragon Ball! Encuentra las figuras m√°s incre√≠bles del universo anime</p>
                <div class="hero-buttons">
                    <button class="btn btn-primary" onclick="scrollToSection('productos')">Ver Productos</button>
                    <button class="btn btn-secondary">Nuevas Llegadas</button>
                </div>
            </div>
            <div class="hero-image">
                <img src="Dragon Ball.png" alt="Dragon Ball Collection" class="hero-img" loading="eager">
            </div>
        </div>
    </section>

    <!-- Slider de productos destacados -->
    <section class="hero-slider">
        <div class="container">
            <h2 class="section-title" style="color: white; margin-bottom: 3rem;">üåü Productos Destacados</h2>
            <div class="slider-container">
                <div class="slider-track" id="sliderTrack">
                    <div class="slide active">
                        <div class="slide-content">
                            <div class="slide-image">
                                <img src="Dragon Ball.png" alt="Goku Super Saiyan" class="slide-img">
            </div>
                            <div class="slide-info">
                                <h3>Goku Super Saiyan</h3>
                                <p>La figura m√°s poderosa de la colecci√≥n</p>
                                <div class="slide-price" id="slidePrice1">COP $377,916</div>
                                <button class="btn btn-primary" onclick="addToCart(1)">
                                    <img src="capsula.jpg" alt="C√°psula" style="width: 16px; height: 16px; margin-right: 0.5rem; border-radius: 50%; vertical-align: middle;">
                                    Agregar al Carrito
                                </button>
            </div>
                    </div>
                </div>
                    <div class="slide">
                        <div class="slide-content">
                            <div class="slide-image">
                                <img src="esfera-dragon.png" alt="Esfera del Drag√≥n" class="slide-img">
                    </div>
                            <div class="slide-info">
                                <h3>Esfera del Drag√≥n</h3>
                                <p>Replica aut√©ntica de 4 estrellas</p>
                                <div class="slide-price" id="slidePrice2">COP $193,158</div>
                                <button class="btn btn-primary" onclick="addToCart(2)">
                                    <img src="capsula.jpg" alt="C√°psula" style="width: 16px; height: 16px; margin-right: 0.5rem; border-radius: 50%; vertical-align: middle;">
                                    Agregar al Carrito
                                </button>
                </div>
                    </div>
                </div>
                    <div class="slide">
                        <div class="slide-content">
                            <div class="slide-image">
                                <img src="capsula.jpg" alt="Vegeta" class="slide-img">
                    </div>
                            <div class="slide-info">
                                <h3>Vegeta Prince</h3>
                                <p>El Pr√≠ncipe de los Saiyajin</p>
                                <div class="slide-price" id="slidePrice3">COP $335,958</div>
                                <button class="btn btn-primary" onclick="addToCart(3)">
                                    <img src="capsula.jpg" alt="C√°psula" style="width: 16px; height: 16px; margin-right: 0.5rem; border-radius: 50%; vertical-align: middle;">
                                    Agregar al Carrito
                                </button>
                </div>
                    </div>
                </div>
                    </div>
                <div class="slider-controls">
                    <button class="slider-btn prev" onclick="changeSlide(-1)">‚ùÆ</button>
                    <button class="slider-btn next" onclick="changeSlide(1)">‚ùØ</button>
                </div>
                <div class="slider-dots">
                    <span class="dot active" onclick="currentSlide(1)"></span>
                    <span class="dot" onclick="currentSlide(2)"></span>
                    <span class="dot" onclick="currentSlide(3)"></span>
                </div>
            </div>
        </div>
    </section>

    <section class="section" id="productos">
        <div class="container">
            <h2 class="section-title">Todos los Productos</h2>
            
            <!-- Filtros por categor√≠a de figuras -->
            <div class="filters-container">
                <button class="filter-btn active" data-filter="all">
                    Todos <span class="filter-count" id="count-all">0</span>
                </button>
                <button class="filter-btn" data-filter="wcf">
                    WCF <span class="filter-count" id="count-wcf">0</span>
                </button>
                <button class="filter-btn" data-filter="gashapon">
                    Gashapon <span class="filter-count" id="count-gashapon">0</span>
                </button>
                <button class="filter-btn" data-filter="wcf-custom">
                    WCF Custom <span class="filter-count" id="count-wcf-custom">0</span>
                </button>
                <button class="filter-btn" data-filter="replicas">
                    R√©plicas <span class="filter-count" id="count-replicas">0</span>
                </button>
                <button class="filter-btn" data-filter="originales">
                    Originales <span class="filter-count" id="count-originales">0</span>
                </button>
            </div>
            
            <!-- B√∫squeda -->
            <div class="search-container">
                <input type="text" class="search-input" placeholder="Buscar productos..." id="searchInput">
            </div>
            
            <div class="products-grid" id="productsGrid">
                <!-- Los productos se cargar√°n din√°micamente desde JavaScript -->
            </div>
        </div>
    </section>

    <section class="section">
        <div class="container">
            <h2 class="section-title">Categor√≠as</h2>
            <div class="categories-grid">
                <div class="category-card" onclick="filterProducts('wcf')">
                    <div class="category-icon">üéØ</div>
                    <h3>WCF</h3>
                    <p>World Collectable Figure - Figuras peque√±as de alta calidad</p>
                </div>
                <div class="category-card" onclick="filterProducts('gashapon')">
                    <div class="category-icon">üé∞</div>
                    <h3>Gashapon</h3>
                    <p>Figuras de c√°psula con sorpresa y detalles √∫nicos</p>
                </div>
                <div class="category-card" onclick="filterProducts('wcf-custom')">
                    <div class="category-icon">üé®</div>
                    <h3>WCF Custom</h3>
                    <p>Figuras WCF personalizadas y pintadas a mano</p>
                </div>
                <div class="category-card" onclick="filterProducts('replicas')">
                    <div class="category-icon">üîÆ</div>
                    <h3>R√©plicas</h3>
                    <p>R√©plicas aut√©nticas de objetos del anime</p>
                </div>
                <div class="category-card" onclick="filterProducts('originales')">
                    <div class="category-icon">‚≠ê</div>
                    <h3>Originales</h3>
                    <p>Productos oficiales de Bandai y Toei Animation</p>
                </div>
            </div>
        </div>
    </section>

    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-header">
            <h3>
                <img src="capsula.jpg" alt="Carrito" style="width: 24px; height: 24px; margin-right: 0.5rem; border-radius: 50%; vertical-align: middle;">
                Carrito de Compras
            </h3>
            <button class="cart-close" onclick="toggleCart()">‚úï</button>
        </div>
        <div class="cart-items" id="cartItems">
            <div class="cart-empty" id="cartEmpty">
                <div class="cart-empty-icon">
                    <img src="capsula.jpg" alt="Carrito vac√≠o" style="width: 60px; height: 60px; border-radius: 50%; opacity: 0.5;">
                </div>
                <p>Tu carrito est√° vac√≠o</p>
                <p>¬°Agrega algunos productos!</p>
            </div>
        </div>
        <div class="cart-footer" id="cartFooter" style="display: none;">
            <div class="cart-total" id="cartTotal">Total: $0.00</div>
            <div class="cart-actions">
                <button class="btn-checkout" onclick="checkout()">üí≥ Checkout</button>
                <button class="btn-clear" onclick="clearCart()">üóëÔ∏è Limpiar</button>
            </div>
        </div>
    </div>

    <div class="modal" id="loginModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üîê Iniciar Sesi√≥n</h3>
                <button onclick="toggleLogin()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer;">‚úï</button>
            </div>
            <div class="modal-body">
                <form onsubmit="handleLogin(event)" id="loginForm">
                    <div class="form-group">
                        <label for="email">üìß Email</label>
                        <input type="email" id="email" required placeholder="tu@email.com">
                    </div>
                    <div class="form-group">
                        <label for="password">üîí Contrase√±a</label>
                        <input type="password" id="password" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                    </div>
                    <div class="form-options">
                        <label class="remember-me">
                            <input type="checkbox" id="rememberMe">
                            <span>Recordarme</span>
                        </label>
                        <a href="#" onclick="showForgotPassword()" class="forgot-password">¬øOlvidaste tu contrase√±a?</a>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">
                        üöÄ Iniciar Sesi√≥n
                    </button>
                </form>
                <div class="modal-divider">
                    <span>o</span>
            </div>
                <div class="social-login">
                    <button class="btn-social google" onclick="loginWithGoogle()">
                        <span>üîç</span> Continuar con Google
                    </button>
                    <button class="btn-social facebook" onclick="loginWithFacebook()">
                        <span>üìò</span> Continuar con Facebook
                    </button>
                </div>
                <p class="register-link">
                    ¬øNo tienes cuenta? 
                    <a href="#" onclick="showRegister()">Reg√≠strate aqu√≠</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Modal de Registro -->
    <div class="modal" id="registerModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üìù Crear Cuenta</h3>
                <button onclick="toggleRegister()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer;">‚úï</button>
            </div>
            <div class="modal-body">
                <form onsubmit="handleRegister(event)" id="registerForm">
                    <div class="form-group">
                        <label for="regName">üë§ Nombre Completo</label>
                        <input type="text" id="regName" required placeholder="Tu nombre completo">
                    </div>
                    <div class="form-group">
                        <label for="regEmail">üìß Email</label>
                        <input type="email" id="regEmail" required placeholder="tu@email.com">
                    </div>
                    <div class="form-group">
                        <label for="regPassword">üîí Contrase√±a</label>
                        <input type="password" id="regPassword" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                    </div>
                    <div class="form-group">
                        <label for="regConfirmPassword">üîí Confirmar Contrase√±a</label>
                        <input type="password" id="regConfirmPassword" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                    </div>
                    <div class="form-group">
                        <label for="regPhone">üì± Tel√©fono</label>
                        <input type="tel" id="regPhone" placeholder="+57 300 123 4567">
                    </div>
                    <div class="form-options">
                        <label class="terms-checkbox">
                            <input type="checkbox" id="acceptTerms" required>
                            <span>Acepto los <a href="#" onclick="showTerms()">t√©rminos y condiciones</a></span>
                        </label>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">
                        üéâ Crear Cuenta
                    </button>
                </form>
                <p class="login-link">
                    ¬øYa tienes cuenta? 
                    <a href="#" onclick="showLogin()">Inicia sesi√≥n aqu√≠</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Modal de Recuperaci√≥n de Contrase√±a -->
    <div class="modal" id="forgotPasswordModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üîë Recuperar Contrase√±a</h3>
                <button onclick="toggleForgotPassword()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer;">‚úï</button>
            </div>
            <div class="modal-body">
                <p class="forgot-description">
                    Ingresa tu email y te enviaremos un enlace para restablecer tu contrase√±a.
                </p>
                <form onsubmit="handleForgotPassword(event)" id="forgotPasswordForm">
                    <div class="form-group">
                        <label for="forgotEmail">üìß Email</label>
                        <input type="email" id="forgotEmail" required placeholder="tu@email.com">
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">
                        üìß Enviar Enlace
                    </button>
                </form>
                <p class="login-link">
                    ¬øRecordaste tu contrase√±a? 
                    <a href="#" onclick="showLogin()">Inicia sesi√≥n aqu√≠</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Modal de galer√≠a de producto -->
    <div class="product-gallery-modal" id="productGalleryModal">
        <div class="gallery-content">
            <div class="gallery-header">
                <h3 class="gallery-title" id="galleryTitle">Producto</h3>
                <button class="gallery-close" onclick="closeProductGallery()">‚úï</button>
            </div>
            <div class="gallery-body">
                <img id="galleryMainImage" src="" alt="Imagen principal" class="gallery-main-image">
                <div class="gallery-thumbnails" id="galleryThumbnails">
                    <!-- Thumbnails se generan din√°micamente -->
                </div>
                <div class="gallery-info">
                    <div class="gallery-price" id="galleryPrice">Precio</div>
                    <p class="gallery-description" id="galleryDescription">Descripci√≥n</p>
                    
                    <!-- Caracter√≠sticas detalladas -->
                    <div class="gallery-characteristics" id="galleryCharacteristics" style="display: none;">
                        <h4 style="color: #ff6b35; margin-bottom: 1rem; font-size: 1.2rem;">üìã Caracter√≠sticas del Producto</h4>
                        <div class="characteristics-grid" id="characteristicsGrid">
                            <!-- Se llena din√°micamente -->
                        </div>
                    </div>
                    
                    <div class="gallery-actions">
                        <button class="btn-gallery-add" id="galleryAddToCart" onclick="addToCartFromGallery()">
                            <img src="capsula.jpg" alt="C√°psula" style="width: 16px; height: 16px; margin-right: 0.5rem; border-radius: 50%; vertical-align: middle;">
                            Agregar al Carrito
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Panel de Administraci√≥n de Productos -->
    <div class="admin-panel" id="adminPanel" style="display: none;">
        <div class="admin-content">
            <div class="admin-header">
                <h3>üõ†Ô∏è Panel de Administraci√≥n</h3>
                <button class="admin-close" onclick="toggleAdminPanel()">‚úï</button>
            </div>
            
            <div class="admin-tabs">
                <button class="admin-tab active" onclick="showAdminTab('bulk')">Agregar en Lote</button>
                <button class="admin-tab" onclick="showAdminTab('single')">Agregar Individual</button>
                <button class="admin-tab" onclick="showAdminTab('import')">Importar JSON</button>
                <button class="admin-tab" onclick="showAdminTab('users')">Usuarios</button>
            </div>
            
            <!-- Tab: Agregar en Lote -->
            <div class="admin-tab-content" id="bulkTab">
                <h4>üì¶ Agregar M√∫ltiples Figuras</h4>
                <div class="admin-section">
                    <label>Nombres de las figuras (uno por l√≠nea):</label>
                    <textarea id="bulkNames" placeholder="Goku Super Saiyan&#10;Vegeta SSJ2&#10;Piccolo&#10;Gohan SSJ"></textarea>
                </div>
                <div class="admin-row">
                    <div class="admin-field">
                        <label>Categor√≠a:</label>
                        <select id="bulkCategory">
                            <option value="wcf">WCF</option>
                            <option value="gashapon">Gashapon</option>
                            <option value="wcf-custom">WCF Custom</option>
                            <option value="replicas">R√©plicas</option>
                            <option value="originales">Originales</option>
                        </select>
                    </div>
                    <div class="admin-field">
                        <label>Precio base (USD):</label>
                        <input type="number" id="bulkPrice" value="15" step="0.01">
                    </div>
                </div>
                <button class="admin-btn" onclick="addBulkFromNames()">Agregar Figuras</button>
            </div>
            
            <!-- Tab: Agregar Individual -->
            <div class="admin-tab-content" id="singleTab" style="display: none;">
                <h4>‚ûï Agregar Figura Individual</h4>
                <div class="admin-form">
                    <div class="admin-row">
                        <div class="admin-field">
                            <label>Nombre:</label>
                            <input type="text" id="singleName" placeholder="Nombre de la figura">
                        </div>
                        <div class="admin-field">
                            <label>Precio (USD):</label>
                            <input type="number" id="singlePrice" value="15" step="0.01">
                        </div>
                    </div>
                    <div class="admin-row">
                        <div class="admin-field">
                            <label>Categor√≠a:</label>
                            <select id="singleCategory">
                                <option value="wcf">WCF</option>
                                <option value="gashapon">Gashapon</option>
                                <option value="wcf-custom">WCF Custom</option>
                                <option value="replicas">R√©plicas</option>
                                <option value="originales">Originales</option>
                            </select>
                        </div>
                        <div class="admin-field">
                            <label>Imagen principal:</label>
                            <input type="text" id="singleImage" placeholder="nombre_imagen.jpg">
                        </div>
                    </div>
                    <div class="admin-field">
                        <label>Descripci√≥n:</label>
                        <textarea id="singleDescription" placeholder="Descripci√≥n de la figura"></textarea>
                    </div>
                    <button class="admin-btn" onclick="addSingleProduct()">Agregar Figura</button>
                </div>
            </div>
            
            <!-- Tab: Importar JSON -->
            <div class="admin-tab-content" id="importTab" style="display: none;">
                <h4>üìÑ Importar desde JSON</h4>
                <div class="admin-section">
                    <label>Pegar JSON de productos:</label>
                    <textarea id="jsonImport" placeholder='[{"name": "Goku", "price": 15, "category": "wcf", "image": "goku.jpg"}]'></textarea>
                </div>
                <button class="admin-btn" onclick="importFromJSON()">Importar Productos</button>
            </div>
            
            <!-- Tab: Gesti√≥n de Usuarios -->
            <div class="admin-tab-content" id="usersTab" style="display: none;">
                <h4>üë• Gesti√≥n de Usuarios</h4>
                
                <!-- Estad√≠sticas generales -->
                <div class="admin-stats">
                    <div class="stat-card">
                        <h3>üë• Total Usuarios</h3>
                        <span class="stat-number" id="totalUsers">0</span>
                    </div>
                    <div class="stat-card">
                        <h3>üì¶ Total Pedidos</h3>
                        <span class="stat-number" id="totalOrders">0</span>
                    </div>
                    <div class="stat-card">
                        <h3>üí∞ Ingresos</h3>
                        <span class="stat-number" id="totalRevenue">COP $0</span>
                    </div>
                </div>
                
                <!-- Lista de usuarios -->
                <div class="admin-section">
                    <h5>üìã Lista de Usuarios</h5>
                    <div class="users-table-container">
                        <table class="users-table" id="usersTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Nombre</th>
                                    <th>Email</th>
                                    <th>Tel√©fono</th>
                                    <th>Ciudad</th>
                                    <th>Pedidos</th>
                                    <th>Registro</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="usersTableBody">
                                <!-- Se llena din√°micamente -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Herramientas de desarrollo (ocultas por defecto) -->
                <div class="admin-section" id="devTools" style="display: none;">
                    <h5>üîß Herramientas de Desarrollo</h5>
                    <div class="admin-row">
                        <button class="admin-btn" onclick="createTestUser()">
                            üë§ Crear Usuario de Prueba
                        </button>
                        <button class="admin-btn" onclick="toggleDevTools()">
                            üîí Ocultar Herramientas
                        </button>
                    </div>
                </div>
                
                <div class="admin-section">
                    <h5>üêò Configuraci√≥n de Supabase (PostgreSQL)</h5>
                    <p>Estado actual: <span id="supabaseStatus">‚ùå No configurado</span></p>
                    <button class="admin-btn admin-btn-secondary" onclick="toggleSupabaseConfig()">
                        üîß Configurar Supabase
                    </button>
                </div>
                
                <button class="admin-btn admin-btn-secondary" onclick="toggleDevTools()">
                    üîß Mostrar Herramientas de Desarrollo
                </button>
            </div>
        </div>
    </div>

    <!-- Bot√≥n flotante para abrir panel de administraci√≥n -->
    <button class="admin-toggle" onclick="toggleAdminPanel()" title="Panel de Administraci√≥n">
        ‚öôÔ∏è
    </button>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>The Collector Store</h4>
                    <p>La tienda oficial de figuras coleccionables en M√©xico</p>
                </div>
                <div class="footer-section">
                    <h4>Enlaces R√°pidos</h4>
                    <ul>
                        <li><a href="#inicio">Inicio</a></li>
                        <li><a href="#productos">Productos</a></li>
                        <li><a href="#ofertas">Ofertas</a></li>
                        <li><a href="#contacto">Contacto</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Informaci√≥n</h4>
                    <ul>
                        <li><a href="#">Env√≠os</a></li>
                        <li><a href="#">Devoluciones</a></li>
                        <li><a href="#">Garant√≠a</a></li>
                        <li><a href="#">T√©rminos y Condiciones</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Contacto</h4>
                    <p>üìû +52 55 1234 5678</p>
                    <p>‚úâÔ∏è info@dragonballstore.com</p>
                    <p>üìç Ciudad de M√©xico, M√©xico</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 The Collector Store. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <script>
        // Configuraci√≥n de moneda
        const CURRENCY_CONFIG = {
            USD_TO_COP: 4200, // Valor aproximado del d√≥lar a peso colombiano
            SYMBOL: 'COP',
            LOCALE: 'es-CO'
        };

        const products = [
            // WCF Custom - Productos reales del usuario
            {id: 29, name: "Spopovich WCF Custom", description: "Figura WCF Custom de Spopovich - Pintura personalizada con detalles √∫nicos. Incluye vista frontal y trasera.", price: 10.00, image: "Spopovich de frente.jpg", images: ["Spopovich de frente.jpg", "Spopovich de espalda.jpg"], category: "wcf-custom", 
             characteristics: {
                 material: "PVC de alta calidad",
                 altura: "8-10 cm",
                 pintura: "Pintura personalizada a mano",
                 detalles: "Detalles √∫nicos en ropa y expresi√≥n",
                 base: "Base transparente incluida",
                 edicion: "Edici√≥n limitada - Solo 50 unidades",
                 estado: "Nuevo en caja original",
                 garantia: "Garant√≠a de 30 d√≠as"
             }},
            
            // WCF - World Collectable Figure
            {id: 1, name: "Goku Super Saiyan WCF", description: "Figura WCF de Goku en forma Super Saiyan - Edici√≥n limitada", price: 89.99, image: "Dragon Ball.jpg", category: "wcf"},
            {id: 7, name: "Goku SSJ3 WCF", description: "Figura WCF de Goku Super Saiyan 3 - Colecci√≥n especial", price: 95.99, image: "capsula.jpg", category: "wcf"},
            {id: 11, name: "Vegeta SSJ2 WCF", description: "Figura WCF de Vegeta Super Saiyan 2 con aura dorada", price: 87.99, image: "Dragon Ball.png", category: "wcf"},
            {id: 12, name: "Gohan SSJ2 WCF", description: "Figura WCF de Gohan Super Saiyan 2 vs Cell", price: 92.99, image: "esfera-dragon.png", category: "wcf"},
            {id: 13, name: "Trunks WCF", description: "Figura WCF de Trunks del Futuro con espada", price: 84.99, image: "capsula.jpg", category: "wcf"},
            {id: 14, name: "Goten WCF", description: "Figura WCF de Goten en su primera transformaci√≥n", price: 78.99, image: "Dragon Ball.jpg", category: "wcf"},
            
            // Gashapon
            {id: 2, name: "Vegeta Prince Gashapon", description: "Figura Gashapon de Vegeta con detalles √∫nicos y pintura especial", price: 129.99, image: "Dragon Ball.png", category: "gashapon"},
            {id: 6, name: "Freezer Final Form Gashapon", description: "Gashapon premium de Freezer en su forma final", price: 159.99, image: "Dragon Ball.png", category: "gashapon"},
            {id: 15, name: "Cell Perfecto Gashapon", description: "Figura Gashapon de Cell en su forma perfecta", price: 145.99, image: "esfera-dragon.png", category: "gashapon"},
            {id: 16, name: "Majin Buu Gashapon", description: "Gashapon de Majin Buu con efectos especiales", price: 138.99, image: "capsula.jpg", category: "gashapon"},
            {id: 17, name: "Goku Ultra Instinct Gashapon", description: "Figura Gashapon de Goku Ultra Instinct - Edici√≥n especial", price: 175.99, image: "Dragon Ball.jpg", category: "gashapon"},
            
            // WCF Custom
            {id: 5, name: "Piccolo WCF Custom", description: "Figura WCF Custom de Piccolo con capa personalizada", price: 79.99, image: "Dragon Ball.jpg", category: "wcf-custom"},
            {id: 9, name: "Broly WCF Custom", description: "WCF Custom de Broly con efectos especiales", price: 110.99, image: "Dragon Ball.jpg", category: "wcf-custom"},
            {id: 18, name: "Goku SSJ4 WCF Custom", description: "WCF Custom de Goku Super Saiyan 4 con pintura met√°lica", price: 125.99, image: "Dragon Ball.png", category: "wcf-custom"},
            {id: 19, name: "Vegeta SSJ4 WCF Custom", description: "Figura WCF Custom de Vegeta SSJ4 con detalles dorados", price: 120.99, image: "esfera-dragon.png", category: "wcf-custom"},
            {id: 20, name: "Gogeta WCF Custom", description: "WCF Custom de Gogeta con aura fusionada personalizada", price: 135.99, image: "capsula.jpg", category: "wcf-custom"},
            
            // R√©plicas
            {id: 3, name: "Esfera del Drag√≥n R√©plica", description: "R√©plica aut√©ntica de la Esfera del Drag√≥n de 7 estrellas", price: 29.99, image: "esfera-dragon.png", category: "replicas"},
            {id: 8, name: "Vegeta SSJ4 R√©plica", description: "R√©plica detallada de Vegeta Super Saiyan 4", price: 75.99, image: "esfera-dragon.png", category: "replicas"},
            {id: 21, name: "Dragon Ball Z R√©plica", description: "Set completo de 7 Esferas del Drag√≥n Z con base", price: 45.99, image: "Dragon Ball.jpg", category: "replicas"},
            {id: 22, name: "C√°psula Espacial R√©plica", description: "R√©plica de c√°psula espacial de Vegeta con luces LED", price: 55.99, image: "capsula.jpg", category: "replicas"},
            {id: 23, name: "Espada de Trunks R√©plica", description: "R√©plica de la espada de Trunks con funda", price: 65.99, image: "Dragon Ball.png", category: "replicas"},
            {id: 24, name: "Guantelete de Freezer R√©plica", description: "R√©plica del guantelete de Freezer con detalles met√°licos", price: 85.99, image: "esfera-dragon.png", category: "replicas"},
            
            // Originales
            {id: 4, name: "C√°psula Hoi-Poi Original", description: "C√°psula Hoi-Poi original de Bandai con luz LED funcional", price: 19.99, image: "capsula.jpg", category: "originales"},
            {id: 10, name: "Gohan Ultimate Original", description: "Figura original de Gohan Ultimate - Edici√≥n exclusiva", price: 85.99, image: "Dragon Ball.png", category: "originales"},
            {id: 25, name: "Goku Super Saiyan God Original", description: "Figura original de Goku Super Saiyan God - Bandai", price: 95.99, image: "Dragon Ball.jpg", category: "originales"},
            {id: 26, name: "Vegeta Super Saiyan Blue Original", description: "Figura original de Vegeta SSB - Toei Animation", price: 98.99, image: "capsula.jpg", category: "originales"},
            {id: 27, name: "Beerus Original", description: "Figura original de Beerus - Edici√≥n limitada Bandai", price: 110.99, image: "Dragon Ball.png", category: "originales"},
            {id: 28, name: "Whis Original", description: "Figura original de Whis con bast√≥n - Colecci√≥n oficial", price: 105.99, image: "esfera-dragon.png", category: "originales"}
        ];
        let cart = [];
        let currentFilter = 'all';
        let currentSlideIndex = 0;
        let slideInterval;
        
        // Cache de elementos DOM para mejor rendimiento
        const domCache = {
            cartButton: null,
            cartItems: null,
            cartTotal: null,
            cartFooter: null,
            cartEmpty: null,
            productsGrid: null,
            searchInput: null,
            filterBtns: null
        };

        // Funciones de conversi√≥n de moneda
        function convertToCOP(usdPrice) {
            return usdPrice * CURRENCY_CONFIG.USD_TO_COP;
        }

        function formatPrice(usdPrice) {
            const copPrice = convertToCOP(usdPrice);
            return new Intl.NumberFormat(CURRENCY_CONFIG.LOCALE, {
                style: 'currency',
                currency: CURRENCY_CONFIG.SYMBOL,
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(copPrice);
        }

        function formatPriceWithDecimals(usdPrice) {
            const copPrice = convertToCOP(usdPrice);
            return new Intl.NumberFormat(CURRENCY_CONFIG.LOCALE, {
                style: 'currency',
                currency: CURRENCY_CONFIG.SYMBOL,
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(copPrice);
        }
        
        document.addEventListener('DOMContentLoaded', function() { 
            // Inicializar cache de elementos DOM
            initDOMCache();
            
            loadProducts(); 
            updateFilterCounts(); // Actualizar contadores de filtros
            initFilters();
            initSlider();
            initScrollAnimations();
            initHeaderScroll();
            updateSliderPrices(); // Actualizar precios del slider
            
            // Inicializar sistema de usuarios
            if (currentUser) {
                updateUIForLoggedUser(currentUser);
            } else {
                updateUIForGuest();
            }
            
            // Inicializar estado de Supabase
            updateSupabaseStatus();
            
            // Forzar reset del total al cargar la p√°gina
            if (domCache.cartTotal) {
                domCache.cartTotal.textContent = 'Total: COP $0';
            }
            
            updateCartDisplay(); // Inicializar el carrito correctamente
        });
        
        // Funci√≥n para inicializar el cache de elementos DOM
        function initDOMCache() {
            domCache.cartButton = document.querySelector('.nav-actions .btn');
            domCache.cartItems = document.getElementById('cartItems');
            domCache.cartTotal = document.getElementById('cartTotal');
            domCache.cartFooter = document.getElementById('cartFooter');
            domCache.cartEmpty = document.getElementById('cartEmpty');
            domCache.productsGrid = document.getElementById('productsGrid');
            domCache.searchInput = document.getElementById('searchInput');
            domCache.filterBtns = document.querySelectorAll('.filter-btn');
        }

        // Funci√≥n para actualizar precios del slider
        function updateSliderPrices() {
            const slidePrices = [
                { id: 'slidePrice1', price: 89.99 },
                { id: 'slidePrice2', price: 45.99 },
                { id: 'slidePrice3', price: 79.99 }
            ];

            slidePrices.forEach(slide => {
                const element = document.getElementById(slide.id);
                if (element) {
                    element.textContent = formatPrice(slide.price);
                }
            });
        }
        
        // Funci√≥n para manejar el scroll del header
        function initHeaderScroll() {
            const header = document.querySelector('.header');
            
            window.addEventListener('scroll', () => {
                const currentScrollY = window.scrollY;
                
                if (currentScrollY > 100) {
                    header.classList.add('scrolled');
                } else {
                    header.classList.remove('scrolled');
                }
            });
        }
        
        // Funciones del slider
        function initSlider() {
            const slides = document.querySelectorAll('.slide');
            const dots = document.querySelectorAll('.dot');
            
            // Auto-slide cada 5 segundos
            slideInterval = setInterval(() => {
                changeSlide(1);
            }, 5000);
            
            // Pausar auto-slide al hacer hover
            const sliderContainer = document.querySelector('.slider-container');
            sliderContainer.addEventListener('mouseenter', () => clearInterval(slideInterval));
            sliderContainer.addEventListener('mouseleave', () => {
                slideInterval = setInterval(() => changeSlide(1), 5000);
            });
        }
        
        function changeSlide(direction) {
            const slides = document.querySelectorAll('.slide');
            const dots = document.querySelectorAll('.dot');
            
            // Ocultar slide actual
            slides[currentSlideIndex].classList.remove('active');
            dots[currentSlideIndex].classList.remove('active');
            
            // Cambiar √≠ndice
            currentSlideIndex += direction;
            
            if (currentSlideIndex >= slides.length) currentSlideIndex = 0;
            if (currentSlideIndex < 0) currentSlideIndex = slides.length - 1;
            
            // Mostrar nuevo slide
            setTimeout(() => {
                slides[currentSlideIndex].classList.add('active');
                dots[currentSlideIndex].classList.add('active');
            }, 50);
        }
        
        function currentSlide(slideNumber) {
            const slides = document.querySelectorAll('.slide');
            const dots = document.querySelectorAll('.dot');
            
            // Ocultar slide actual
            slides[currentSlideIndex].classList.remove('active');
            dots[currentSlideIndex].classList.remove('active');
            
            // Cambiar a slide espec√≠fico
            currentSlideIndex = slideNumber - 1;
            
            // Mostrar nuevo slide
            setTimeout(() => {
                slides[currentSlideIndex].classList.add('active');
                dots[currentSlideIndex].classList.add('active');
            }, 50);
        }
        
        // Animaciones de scroll
        function initScrollAnimations() {
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.animation = 'fadeIn 0.8s ease forwards';
                    }
                });
            }, observerOptions);
            
            // Observar elementos para animar
            document.querySelectorAll('.product-card, .category-card, .section-title').forEach(el => {
                el.style.opacity = '0';
                el.style.transform = 'translateY(30px)';
                observer.observe(el);
            });
        }
        function loadProducts() {
            const productsGrid = document.getElementById('productsGrid');
            productsGrid.innerHTML = '';
            const filteredProducts = currentFilter === 'all' ? products : products.filter(product => product.category === currentFilter);
            
            filteredProducts.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.setAttribute('data-category', product.category);
                
                // Determinar badge seg√∫n la categor√≠a
                let badge = '';
                if (product.category === 'wcf') {
                    badge = '<div class="product-badge wcf">WCF</div>';
                } else if (product.category === 'gashapon') {
                    badge = '<div class="product-badge gashapon">Gashapon</div>';
                } else if (product.category === 'wcf-custom') {
                    badge = '<div class="product-badge custom">Custom</div>';
                } else if (product.category === 'replicas') {
                    badge = '<div class="product-badge replica">R√©plica</div>';
                } else if (product.category === 'originales') {
                    badge = '<div class="product-badge original">Original</div>';
                }
                
                // Crear galer√≠a de im√°genes si el producto tiene m√∫ltiples im√°genes
                let galleryHTML = '';
                if (product.images && product.images.length > 1) {
                    galleryHTML = `
                        <div class="product-gallery">
                            <img src="${product.images[0]}" alt="${product.name}" class="product-image-main" onclick="openProductGallery(${product.id})">
                            <div class="product-thumbnails">
                                ${product.images.map((img, index) => 
                                    `<img src="${img}" alt="${product.name} ${index + 1}" class="product-thumbnail ${index === 0 ? 'active' : ''}" onclick="changeMainImage(this, '${product.images[0]}')">`
                                ).join('')}
                            </div>
                        </div>
                    `;
                } else {
                    galleryHTML = `<img src="${product.image}" alt="${product.name}" class="product-image" onclick="openProductGallery(${product.id})">`;
                }

                productCard.innerHTML = `
                    ${badge}
                    ${galleryHTML}
                    <div class="product-info">
                        <h3 class="product-title">${product.name}</h3>
                        <p class="product-description">${product.description}</p>
                        <div class="product-price">${formatPrice(product.price)}</div>
                        <button class="add-to-cart" onclick="addToCart(${product.id})">
                            <img src="capsula.jpg" alt="C√°psula" style="width: 16px; height: 16px; margin-right: 0.5rem; border-radius: 50%; vertical-align: middle;">
                            Agregar al Carrito
                        </button>
                    </div>
                `;
                productsGrid.appendChild(productCard);
            });
        }
        
        // Funciones de filtros y b√∫squeda
        function initFilters() {
            const filterBtns = document.querySelectorAll('.filter-btn');
            const searchInput = document.getElementById('searchInput');
            
            // Filtros por categor√≠a
            filterBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    // Remover clase active de todos los botones
                    filterBtns.forEach(b => b.classList.remove('active'));
                    // Agregar clase active al bot√≥n clickeado
                    btn.classList.add('active');
                    
                    const filter = btn.getAttribute('data-filter');
                    filterProducts(filter);
                });
            });
            
            // B√∫squeda en tiempo real
            if (searchInput) {
                searchInput.addEventListener('input', (e) => {
                    const searchTerm = e.target.value.toLowerCase();
                    searchProducts(searchTerm);
                });
            }
        }
        
        function filterProducts(category) {
            currentFilter = category;
            loadProducts();
            updateFilterCounts();
            
            // Actualizar botones de filtro
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.getAttribute('data-filter') === category) {
                    btn.classList.add('active');
                }
            });
            
            // Actualizar tarjetas de categor√≠a
            document.querySelectorAll('.category-card').forEach(card => {
                card.style.borderColor = 'transparent';
                card.style.transform = 'scale(1)';
                card.style.boxShadow = '0 4px 8px rgba(0,0,0,0.1)';
            });
            
            // Resaltar la categor√≠a seleccionada
            const selectedCard = document.querySelector(`[onclick="filterProducts('${category}')"]`);
            if (selectedCard) {
                selectedCard.style.borderColor = '#ff6b35';
                selectedCard.style.transform = 'scale(1.05)';
                selectedCard.style.boxShadow = '0 8px 16px rgba(255, 107, 53, 0.3)';
            }
        }

        function updateFilterCounts() {
            // Contar productos por categor√≠a
            const counts = {
                'all': products.length,
                'wcf': products.filter(p => p.category === 'wcf').length,
                'gashapon': products.filter(p => p.category === 'gashapon').length,
                'wcf-custom': products.filter(p => p.category === 'wcf-custom').length,
                'replicas': products.filter(p => p.category === 'replicas').length,
                'originales': products.filter(p => p.category === 'originales').length
            };

            // Actualizar contadores
            Object.keys(counts).forEach(category => {
                const countElement = document.getElementById(`count-${category}`);
                if (countElement) {
                    countElement.textContent = counts[category];
                }
            });
        }
        
        function searchProducts(searchTerm) {
            const products = document.querySelectorAll('.product-card');
            
            products.forEach(product => {
                const title = product.querySelector('.product-title').textContent.toLowerCase();
                const description = product.querySelector('.product-description').textContent.toLowerCase();
                
                if (title.includes(searchTerm) || description.includes(searchTerm)) {
                    product.style.display = 'block';
                    product.style.animation = 'fadeIn 0.5s ease';
                } else {
                    product.style.display = 'none';
                }
            });
        }
        
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            const existingItem = cart.find(item => item.id === productId);
            if (existingItem) { 
                existingItem.quantity++; 
            } else { 
                cart.push({...product, quantity: 1}); 
            }
            
            updateCartDisplay();
            showAddToCartAnimation(productId);
        }
        function updateCartDisplay() {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            if (domCache.cartButton) {
                domCache.cartButton.innerHTML = `<img src="capsula.jpg" alt="Carrito" style="width: 20px; height: 20px; border-radius: 50%; flex-shrink: 0;"><span>Carrito (${totalItems})</span>`;
            }
            
            // Verificar que los elementos existan usando cache
            if (!domCache.cartItems || !domCache.cartTotal || !domCache.cartFooter) {
                console.error('Elementos del carrito no encontrados');
                return;
            }
            
            // Limpiar contenido
            domCache.cartItems.innerHTML = '';
            
            // Verificar si el carrito est√° vac√≠o
            if (cart.length === 0 || totalItems === 0) {
                if (domCache.cartEmpty) {
                    domCache.cartItems.appendChild(domCache.cartEmpty);
                } else {
                    // Crear el elemento cartEmpty si no existe
                    const emptyDiv = document.createElement('div');
                    emptyDiv.className = 'cart-empty';
                    emptyDiv.innerHTML = `
                        <div class="cart-empty-icon">
                            <img src="capsula.jpg" alt="Carrito vac√≠o" style="width: 60px; height: 60px; border-radius: 50%; opacity: 0.5;">
                        </div>
                        <p>Tu carrito est√° vac√≠o</p>
                        <p>¬°Agrega algunos productos!</p>
                    `;
                    domCache.cartItems.appendChild(emptyDiv);
                }
                domCache.cartFooter.style.display = 'none';
                domCache.cartTotal.textContent = 'Total: COP $0';
                console.log('Carrito vac√≠o - Total reseteado a $0.00');
            } else {
                domCache.cartFooter.style.display = 'block';
                
                let total = 0;
                cart.forEach(item => {
                    total += item.price * item.quantity;
                    
                    const cartItem = document.createElement('div');
                    cartItem.className = 'cart-item';
                    cartItem.innerHTML = `
                        <div class="cart-item-main">
                            <img src="${item.image}" alt="${item.name}" class="cart-item-image">
                            <div class="cart-item-info">
                                <div class="cart-item-name">${item.name}</div>
                                <div class="cart-item-price">${formatPrice(item.price)}</div>
                            </div>
                        </div>
                        <div class="cart-item-controls">
                            <button class="quantity-btn" onclick="updateQuantity(${item.id}, -1)" ${item.quantity <= 1 ? 'disabled' : ''}>-</button>
                            <span class="quantity">${item.quantity}</span>
                            <button class="quantity-btn" onclick="updateQuantity(${item.id}, 1)">+</button>
                            <button class="remove-item" onclick="removeFromCart(${item.id})">üóëÔ∏è</button>
                        </div>
                    `;
                    domCache.cartItems.appendChild(cartItem);
                });
                
                domCache.cartTotal.textContent = `Total: ${formatPrice(total)}`;
                console.log('Carrito con productos - Total:', total);
            }
        }
        function updateQuantity(productId, change) {
            const item = cart.find(item => item.id === productId);
            if (!item) return;
            item.quantity += change;
            if (item.quantity <= 0) { 
                cart = cart.filter(item => item.id !== productId); 
            }
            
            // Verificar si el carrito est√° vac√≠o despu√©s de la actualizaci√≥n
            if (cart.length === 0 && domCache.cartTotal) {
                domCache.cartTotal.textContent = 'Total: COP $0';
            }
            
            updateCartDisplay();
        }
        function removeFromCart(productId) { 
            cart = cart.filter(item => item.id !== productId); 
            
            // Verificar si el carrito est√° vac√≠o despu√©s de eliminar
            if (cart.length === 0 && domCache.cartTotal) {
                domCache.cartTotal.textContent = 'Total: COP $0';
            }
            
            updateCartDisplay(); 
        }
        
        function clearCart() {
            if (confirm('¬øEst√°s seguro de que quieres vaciar el carrito?')) {
                cart = [];
                // Forzar reset del total usando cache
                if (domCache.cartTotal) {
                    domCache.cartTotal.textContent = 'Total: COP $0';
                }
                updateCartDisplay();
            }
        }
        
        function toggleCart() { 
            const cartSidebar = document.getElementById('cartSidebar');
            cartSidebar.classList.toggle('active');
            
            // Si se est√° abriendo el carrito, actualizar la visualizaci√≥n
            if (cartSidebar.classList.contains('active')) {
                // Limpiar carrito si est√° vac√≠o usando cache
                if (cart.length === 0) {
                    cart = [];
                    if (domCache.cartTotal) {
                        domCache.cartTotal.textContent = 'Total: COP $0';
                    }
                }
                updateCartDisplay();
            }
        }
        
        function checkout() {
            if (cart.length === 0) { 
                alert('Tu carrito est√° vac√≠o'); 
                return; 
            }
            
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            alert(`¬°Gracias por tu compra!\n\nTotal: ${formatPrice(total)}\n\n¬°Disfruta tus figuras Dragon Ball!`);
            
            cart = [];
            updateCartDisplay();
            toggleCart();
        }
        
        function showAddToCartAnimation(productId) {
            // Buscar el bot√≥n del producto espec√≠fico
            const productCard = document.querySelector(`[onclick="addToCart(${productId})"]`).closest('.product-card');
            if (!productCard) return;
            
            // Obtener la posici√≥n del producto
            const rect = productCard.getBoundingClientRect();
            
            // Crear elemento de animaci√≥n
            const animation = document.createElement('div');
            animation.style.cssText = `
                position: fixed;
                top: ${rect.top + rect.height/2}px;
                left: ${rect.left + rect.width/2}px;
                transform: translate(-50%, -50%);
                background: linear-gradient(135deg, #4CAF50, #45a049);
                color: white;
                padding: 0.8rem 1.5rem;
                border-radius: 20px;
                font-weight: bold;
                font-size: 0.9rem;
                z-index: 10000;
                animation: fadeInOut 2s ease;
                pointer-events: none;
                box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
                border: 2px solid rgba(255, 255, 255, 0.3);
            `;
            animation.textContent = '¬°Agregado!';
            document.body.appendChild(animation);
            
            // Remover despu√©s de 2 segundos
            setTimeout(() => {
                if (document.body.contains(animation)) {
                    document.body.removeChild(animation);
                }
            }, 2000);
        }
        function toggleLogin() { document.getElementById('loginModal').classList.toggle('active'); }
        function scrollToSection(sectionId) {
            const section = document.getElementById(sectionId);
            if (section) { section.scrollIntoView({ behavior: 'smooth' }); }
        }
        // Funciones de login mejoradas
        function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const rememberMe = document.getElementById('rememberMe').checked;
            
            if (!email || !password) {
                alert('‚ùå Por favor completa todos los campos');
                return;
            }
            
            try {
                const user = authenticateUser(email, password);
                if (user) {
                    alert(`‚úÖ ¬°Bienvenido, ${user.firstName}!\n\nSesi√≥n iniciada correctamente`);
                    
                    if (rememberMe) {
                        localStorage.setItem('rememberedEmail', email);
                        localStorage.setItem('rememberMe', 'true');
                    }
                    
                    // Actualizar interfaz para usuario logueado
                    updateUIForLoggedUser(user);
                    
                    toggleLogin();
                    document.getElementById('loginForm').reset();
                } else {
                    alert('‚ùå Email o contrase√±a incorrectos');
                }
            } catch (error) {
                alert('‚ùå Error al iniciar sesi√≥n: ' + error.message);
            }
        }

        function handleRegister(e) {
            e.preventDefault();
            const name = document.getElementById('regName').value;
            const email = document.getElementById('regEmail').value;
            const password = document.getElementById('regPassword').value;
            const confirmPassword = document.getElementById('regConfirmPassword').value;
            const phone = document.getElementById('regPhone').value;
            const acceptTerms = document.getElementById('acceptTerms').checked;
            
            // Validaciones
            if (!name || !email || !password || !confirmPassword) {
                alert('‚ùå Por favor completa todos los campos obligatorios');
                return;
            }
            
            if (password !== confirmPassword) {
                alert('‚ùå Las contrase√±as no coinciden');
                return;
            }
            
            if (password.length < 6) {
                alert('‚ùå La contrase√±a debe tener al menos 6 caracteres');
                return;
            }
            
            if (!acceptTerms) {
                alert('‚ùå Debes aceptar los t√©rminos y condiciones');
                return;
            }
            
            if (!email.includes('@')) {
                alert('‚ùå Email inv√°lido');
                return;
            }
            
            try {
                const firstName = name.split(' ')[0] || '';
                const lastName = name.split(' ').slice(1).join(' ') || '';
                
                const userData = {
                    firstName: firstName,
                    lastName: lastName,
                    email: email,
                    password: password,
                    phone: phone
                };
                
                const newUser = registerUser(userData);
                alert(`‚úÖ ¬°Cuenta creada exitosamente!\n\nBienvenido, ${newUser.firstName} ${newUser.lastName}`);
                
                // Iniciar sesi√≥n autom√°ticamente
                currentUser = newUser;
                saveCurrentUser(newUser);
                updateUIForLoggedUser(newUser);
                
                toggleRegister();
                document.getElementById('registerForm').reset();
            } catch (error) {
                alert('‚ùå Error al crear cuenta: ' + error.message);
            }
        }

        function handleForgotPassword(e) {
            e.preventDefault();
            const email = document.getElementById('forgotEmail').value;
            
            if (email && email.includes('@')) {
                alert(`üìß Se ha enviado un enlace de recuperaci√≥n a ${email}\n\nRevisa tu bandeja de entrada.`);
                toggleForgotPassword();
                document.getElementById('forgotPasswordForm').reset();
            } else {
                alert('‚ùå Por favor ingresa un email v√°lido');
            }
        }

        // Funciones de navegaci√≥n entre modales
        function showRegister() {
            toggleLogin();
            setTimeout(() => {
                document.getElementById('registerModal').classList.add('active');
            }, 300);
        }

        function showLogin() {
            toggleRegister();
            toggleForgotPassword();
            setTimeout(() => {
                document.getElementById('loginModal').classList.add('active');
            }, 300);
        }

        function showForgotPassword() {
            toggleLogin();
            setTimeout(() => {
                document.getElementById('forgotPasswordModal').classList.add('active');
            }, 300);
        }

        function toggleRegister() {
            document.getElementById('registerModal').classList.toggle('active');
        }

        function toggleForgotPassword() {
            document.getElementById('forgotPasswordModal').classList.toggle('active');
        }

        // Funciones de login social (simuladas)
        function loginWithGoogle() {
            alert('üîç Iniciando sesi√≥n con Google...\n\n(Funci√≥n simulada - En producci√≥n se integrar√≠a con Google OAuth)');
        }

        function loginWithFacebook() {
            alert('üìò Iniciando sesi√≥n con Facebook...\n\n(Funci√≥n simulada - En producci√≥n se integrar√≠a con Facebook SDK)');
        }

        function showTerms() {
            alert('üìã T√©rminos y Condiciones\n\nAqu√≠ ir√≠an los t√©rminos y condiciones de la tienda.\n\n(Funci√≥n simulada)');
        }

        // Funciones de galer√≠a de productos
        let currentGalleryProduct = null;

        function openProductGallery(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;

            currentGalleryProduct = product;
            const modal = document.getElementById('productGalleryModal');
            const title = document.getElementById('galleryTitle');
            const mainImage = document.getElementById('galleryMainImage');
            const price = document.getElementById('galleryPrice');
            const description = document.getElementById('galleryDescription');
            const thumbnails = document.getElementById('galleryThumbnails');
            const characteristics = document.getElementById('galleryCharacteristics');
            const characteristicsGrid = document.getElementById('characteristicsGrid');

            title.textContent = product.name;
            price.textContent = formatPrice(product.price);
            description.textContent = product.description;

            // Configurar im√°genes
            const productImages = product.images || [product.image];
            mainImage.src = productImages[0];

            // Crear thumbnails
            thumbnails.innerHTML = '';
            productImages.forEach((img, index) => {
                const thumbnail = document.createElement('img');
                thumbnail.src = img;
                thumbnail.alt = `${product.name} ${index + 1}`;
                thumbnail.className = `gallery-thumbnail ${index === 0 ? 'active' : ''}`;
                thumbnail.onclick = () => changeGalleryImage(img, thumbnail);
                thumbnails.appendChild(thumbnail);
            });

            // Mostrar caracter√≠sticas si existen
            if (product.characteristics) {
                characteristics.style.display = 'block';
                characteristicsGrid.innerHTML = '';
                
                const characteristicLabels = {
                    material: 'Material',
                    altura: 'Altura',
                    pintura: 'Pintura',
                    detalles: 'Detalles',
                    base: 'Base',
                    edicion: 'Edici√≥n',
                    estado: 'Estado',
                    garantia: 'Garant√≠a'
                };

                const characteristicIcons = {
                    material: 'üß±',
                    altura: 'üìè',
                    pintura: 'üé®',
                    detalles: '‚ú®',
                    base: 'üî≤',
                    edicion: 'üè∑Ô∏è',
                    estado: 'üì¶',
                    garantia: 'üõ°Ô∏è'
                };

                Object.entries(product.characteristics).forEach(([key, value]) => {
                    const item = document.createElement('div');
                    item.className = 'characteristic-item';
                    item.innerHTML = `
                        <div class="characteristic-icon">${characteristicIcons[key] || 'üìã'}</div>
                        <div class="characteristic-content">
                            <div class="characteristic-label">${characteristicLabels[key] || key}</div>
                            <div class="characteristic-value">${value}</div>
                        </div>
                    `;
                    characteristicsGrid.appendChild(item);
                });
            } else {
                characteristics.style.display = 'none';
            }

            modal.classList.add('active');
        }

        function closeProductGallery() {
            document.getElementById('productGalleryModal').classList.remove('active');
            currentGalleryProduct = null;
        }

        function changeGalleryImage(imageSrc, thumbnail) {
            const mainImage = document.getElementById('galleryMainImage');
            const thumbnails = document.querySelectorAll('.gallery-thumbnail');
            
            mainImage.src = imageSrc;
            
            // Actualizar thumbnails activos
            thumbnails.forEach(t => t.classList.remove('active'));
            thumbnail.classList.add('active');
        }

        function changeMainImage(thumbnail, fallbackImage) {
            const mainImage = thumbnail.closest('.product-gallery').querySelector('.product-image-main');
            const thumbnails = thumbnail.parentElement.querySelectorAll('.product-thumbnail');
            
            mainImage.src = thumbnail.src;
            
            // Actualizar thumbnails activos
            thumbnails.forEach(t => t.classList.remove('active'));
            thumbnail.classList.add('active');
        }

        function addToCartFromGallery() {
            if (currentGalleryProduct) {
                addToCart(currentGalleryProduct.id);
                closeProductGallery();
            }
        }

        // Cerrar modal al hacer clic fuera
        document.getElementById('productGalleryModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeProductGallery();
            }
        });

        // ===== SISTEMA DE USUARIOS Y CUENTAS =====
        
        // Base de datos local de usuarios (fallback)
        let users = JSON.parse(localStorage.getItem('tienda_users')) || [];
        let currentUser = JSON.parse(localStorage.getItem('tienda_current_user')) || null;
        
        // Configuraci√≥n de Supabase
        let useSupabase = true; // Cambiar a true cuando configures Supabase
        
        // Funci√≥n para verificar si Supabase est√° disponible
        function checkSupabase() {
            return window.supabase && window.supabase !== null;
        }
        
        // ===== FUNCIONES DE SUPABASE =====
        
        // Funci√≥n para registrar usuario en Supabase
        async function registerUserSupabase(userData) {
            try {
                // Crear usuario en Supabase Auth
                const { data: authData, error: authError } = await window.supabase.auth.signUp({
                    email: userData.email,
                    password: userData.password,
                    options: {
                        data: {
                            first_name: userData.firstName,
                            last_name: userData.lastName,
                            phone: userData.phone || ''
                        }
                    }
                });

                if (authError) throw authError;

                // Crear perfil en la tabla users
                const { data: profileData, error: profileError } = await window.supabase
                    .from('users')
                    .insert([
                        {
                            id: authData.user.id,
                            first_name: userData.firstName,
                            last_name: userData.lastName,
                            email: userData.email,
                            phone: userData.phone || '',
                            address: userData.address || '',
                            city: userData.city || '',
                            postal_code: userData.postalCode || '',
                            country: userData.country || 'M√©xico',
                            date_registered: new Date().toISOString(),
                            is_active: true,
                            preferences: {
                                newsletter: false,
                                notifications: true,
                                currency: 'COP'
                            }
                        }
                    ])
                    .select();

                if (profileError) throw profileError;

                return {
                    id: authData.user.id,
                    firstName: userData.firstName,
                    lastName: userData.lastName,
                    email: userData.email,
                    phone: userData.phone || '',
                    address: userData.address || '',
                    city: userData.city || '',
                    postalCode: userData.postalCode || '',
                    country: userData.country || 'M√©xico',
                    dateRegistered: new Date().toISOString(),
                    isActive: true,
                    orders: [],
                    wishlist: [],
                    preferences: {
                        newsletter: false,
                        notifications: true,
                        currency: 'COP'
                    }
                };
            } catch (error) {
                throw new Error('Error al registrar usuario: ' + error.message);
            }
        }
        
        // Funci√≥n para autenticar usuario en Supabase
        async function authenticateUserSupabase(email, password) {
            try {
                // Autenticar en Supabase Auth
                const { data: authData, error: authError } = await window.supabase.auth.signInWithPassword({
                    email: email,
                    password: password
                });

                if (authError) throw authError;

                // Obtener datos del usuario de la tabla users
                const { data: userData, error: userError } = await window.supabase
                    .from('users')
                    .select('*')
                    .eq('id', authData.user.id)
                    .single();

                if (userError) throw userError;

                return {
                    id: userData.id,
                    firstName: userData.first_name,
                    lastName: userData.last_name,
                    email: userData.email,
                    phone: userData.phone || '',
                    address: userData.address || '',
                    city: userData.city || '',
                    postalCode: userData.postal_code || '',
                    country: userData.country || 'M√©xico',
                    dateRegistered: userData.date_registered,
                    isActive: userData.is_active,
                    orders: userData.orders || [],
                    wishlist: userData.wishlist || [],
                    preferences: userData.preferences || {
                        newsletter: false,
                        notifications: true,
                        currency: 'COP'
                    }
                };
            } catch (error) {
                throw new Error('Error al autenticar usuario: ' + error.message);
            }
        }
        
        // Funci√≥n para obtener todos los usuarios de Supabase
        async function getUsersSupabase() {
            try {
                const { data, error } = await window.supabase
                    .from('users')
                    .select('*')
                    .eq('is_active', true);

                if (error) throw error;

                return data.map(user => ({
                    id: user.id,
                    firstName: user.first_name,
                    lastName: user.last_name,
                    email: user.email,
                    phone: user.phone || '',
                    address: user.address || '',
                    city: user.city || '',
                    postalCode: user.postal_code || '',
                    country: user.country || 'M√©xico',
                    dateRegistered: user.date_registered,
                    isActive: user.is_active,
                    orders: user.orders || [],
                    wishlist: user.wishlist || [],
                    preferences: user.preferences || {
                        newsletter: false,
                        notifications: true,
                        currency: 'COP'
                    }
                }));
            } catch (error) {
                console.error('Error al obtener usuarios:', error);
                return [];
            }
        }

        // ===== FUNCIONES DE FIREBASE =====
        
        // Funci√≥n para registrar usuario en Firebase
        async function registerUserFirebase(userData) {
            try {
                const { createUserWithEmailAndPassword } = window.firebaseAuth;
                const { collection, addDoc } = window.firebaseFirestore;
                
                // Crear usuario en Firebase Auth
                const userCredential = await createUserWithEmailAndPassword(
                    window.auth, 
                    userData.email, 
                    userData.password
                );
                
                const user = userCredential.user;
                
                // Crear documento en Firestore
                const userDoc = {
                    uid: user.uid,
                    firstName: userData.firstName,
                    lastName: userData.lastName,
                    email: userData.email,
                    phone: userData.phone || '',
                    address: userData.address || '',
                    city: userData.city || '',
                    postalCode: userData.postalCode || '',
                    country: userData.country || 'M√©xico',
                    dateRegistered: new Date().toISOString(),
                    isActive: true,
                    orders: [],
                    wishlist: [],
                    preferences: {
                        newsletter: false,
                        notifications: true,
                        currency: 'COP'
                    }
                };
                
                await addDoc(collection(window.db, 'users'), userDoc);
                
                return { ...userDoc, id: user.uid };
            } catch (error) {
                throw new Error('Error al registrar usuario: ' + error.message);
            }
        }
        
        // Funci√≥n para autenticar usuario en Firebase
        async function authenticateUserFirebase(email, password) {
            try {
                const { signInWithEmailAndPassword } = window.firebaseAuth;
                const { collection, getDocs, query, where } = window.firebaseFirestore;
                
                // Autenticar en Firebase Auth
                const userCredential = await signInWithEmailAndPassword(
                    window.auth, 
                    email, 
                    password
                );
                
                const user = userCredential.user;
                
                // Obtener datos del usuario de Firestore
                const q = query(collection(window.db, 'users'), where('uid', '==', user.uid));
                const querySnapshot = await getDocs(q);
                
                if (!querySnapshot.empty) {
                    const userDoc = querySnapshot.docs[0].data();
                    return { ...userDoc, id: user.uid };
                } else {
                    throw new Error('Usuario no encontrado en la base de datos');
                }
            } catch (error) {
                throw new Error('Error al autenticar usuario: ' + error.message);
            }
        }
        
        // Funci√≥n para obtener todos los usuarios de Firebase
        async function getUsersFirebase() {
            try {
                const { collection, getDocs } = window.firebaseFirestore;
                const querySnapshot = await getDocs(collection(window.db, 'users'));
                
                const users = [];
                querySnapshot.forEach((doc) => {
                    users.push({ ...doc.data(), id: doc.id });
                });
                
                return users;
            } catch (error) {
                console.error('Error al obtener usuarios:', error);
                return [];
            }
        }
        
        // Funci√≥n para guardar usuarios en localStorage
        function saveUsers() {
            localStorage.setItem('tienda_users', JSON.stringify(users));
        }
        
        // Funci√≥n para guardar usuario actual
        function saveCurrentUser(user) {
            localStorage.setItem('tienda_current_user', JSON.stringify(user));
        }
        
        // Funci√≥n para registrar nuevo usuario
        async function registerUser(userData) {
            // Usar Supabase si est√° disponible y configurado
            if (useSupabase && checkSupabase()) {
                return await registerUserSupabase(userData);
            }
            
            // Fallback a localStorage
            // Validar que el email no exista
            if (users.find(u => u.email === userData.email)) {
                throw new Error('Este email ya est√° registrado');
            }
            
            // Crear nuevo usuario
            const newUser = {
                id: Date.now(), // ID √∫nico basado en timestamp
                email: userData.email,
                password: userData.password, // En producci√≥n, esto deber√≠a estar encriptado
                firstName: userData.firstName,
                lastName: userData.lastName,
                phone: userData.phone || '',
                address: userData.address || '',
                city: userData.city || '',
                postalCode: userData.postalCode || '',
                country: userData.country || 'M√©xico',
                dateRegistered: new Date().toISOString(),
                isActive: true,
                orders: [],
                wishlist: [],
                preferences: {
                    newsletter: false,
                    notifications: true,
                    currency: 'COP'
                }
            };
            
            // Agregar usuario a la base de datos
            users.push(newUser);
            saveUsers();
            
            return newUser;
        }
        
        // Funci√≥n para autenticar usuario
        async function authenticateUser(email, password) {
            // Usar Supabase si est√° disponible y configurado
            if (useSupabase && checkSupabase()) {
                try {
                    const user = await authenticateUserSupabase(email, password);
                    currentUser = user;
                    saveCurrentUser(user);
                    return user;
                } catch (error) {
                    console.error('Error de autenticaci√≥n Supabase:', error);
                    return null;
                }
            }
            
            // Fallback a localStorage
            const user = users.find(u => u.email === email && u.password === password && u.isActive);
            if (user) {
                currentUser = user;
                saveCurrentUser(user);
                return user;
            }
            return null;
        }
        
        // Funci√≥n para cerrar sesi√≥n
        function logoutUser() {
            currentUser = null;
            localStorage.removeItem('tienda_current_user');
        }
        
        // Funci√≥n para actualizar perfil de usuario
        function updateUserProfile(userId, updateData) {
            const userIndex = users.findIndex(u => u.id === userId);
            if (userIndex !== -1) {
                users[userIndex] = { ...users[userIndex], ...updateData };
                saveUsers();
                
                // Actualizar usuario actual si es el mismo
                if (currentUser && currentUser.id === userId) {
                    currentUser = users[userIndex];
                    saveCurrentUser(currentUser);
                }
                
                return users[userIndex];
            }
            return null;
        }
        
        // Funci√≥n para agregar pedido al usuario
        function addOrderToUser(userId, orderData) {
            const user = users.find(u => u.id === userId);
            if (user) {
                const newOrder = {
                    id: Date.now(),
                    date: new Date().toISOString(),
                    items: orderData.items,
                    total: orderData.total,
                    status: 'pending',
                    shippingAddress: orderData.shippingAddress,
                    paymentMethod: orderData.paymentMethod || 'transferencia'
                };
                
                user.orders.push(newOrder);
                saveUsers();
                return newOrder;
            }
            return null;
        }

        // ===== FUNCIONES PARA AGREGAR PRODUCTOS EN LOTE =====
        
        // Funci√≥n para agregar m√∫ltiples productos de una vez
        function addBulkProducts(newProducts) {
            // Obtener el siguiente ID disponible
            let nextId = Math.max(...products.map(p => p.id)) + 1;
            
            // Agregar IDs a los nuevos productos
            newProducts.forEach(product => {
                if (!product.id) {
                    product.id = nextId++;
                }
                // Agregar caracter√≠sticas por defecto si no existen
                if (!product.characteristics) {
                    product.characteristics = {
                        material: "PVC de alta calidad",
                        altura: "8-10 cm",
                        pintura: "Pintura oficial",
                        detalles: "Detalles √∫nicos",
                        base: "Base incluida",
                        edicion: "Edici√≥n est√°ndar",
                        estado: "Nuevo en caja",
                        garantia: "Garant√≠a de 30 d√≠as"
                    };
                }
            });
            
            // Agregar a la lista de productos
            products.push(...newProducts);
            
            // Recargar productos y actualizar contadores
            loadProducts();
            updateFilterCounts();
            
            console.log(`‚úÖ Se agregaron ${newProducts.length} productos exitosamente`);
            return newProducts.length;
        }

        // Funci√≥n para agregar productos desde un array simple
        function addProductsFromArray(productData) {
            const newProducts = productData.map((item, index) => ({
                id: 0, // Se asignar√° autom√°ticamente
                name: item.name || `Figura ${index + 1}`,
                description: item.description || "Figura coleccionable de alta calidad",
                price: item.price || 15.00,
                image: item.image || "Dragon Ball.jpg",
                images: item.images || [item.image || "Dragon Ball.jpg"],
                category: item.category || "wcf",
                characteristics: item.characteristics || {
                    material: "PVC de alta calidad",
                    altura: item.altura || "8-10 cm",
                    pintura: "Pintura oficial",
                    detalles: item.detalles || "Detalles √∫nicos",
                    base: "Base incluida",
                    edicion: item.edicion || "Edici√≥n est√°ndar",
                    estado: "Nuevo en caja",
                    garantia: "Garant√≠a de 30 d√≠as"
                }
            }));
            
            return addBulkProducts(newProducts);
        }

        // Funci√≥n para crear productos desde nombres simples
        function createProductsFromNames(names, category = "wcf", basePrice = 15.00) {
            const newProducts = names.map((name, index) => ({
                name: name,
                description: `Figura ${category.toUpperCase()} de ${name} - Colecci√≥n oficial`,
                price: basePrice + (index * 2), // Precio incremental
                image: `${name.replace(/\s+/g, '_').toLowerCase()}.jpg`,
                images: [
                    `${name.replace(/\s+/g, '_').toLowerCase()}_frente.jpg`,
                    `${name.replace(/\s+/g, '_').toLowerCase()}_espalda.jpg`
                ],
                category: category,
                characteristics: {
                    material: "PVC de alta calidad",
                    altura: "8-10 cm",
                    pintura: "Pintura oficial",
                    detalles: `Detalles √∫nicos de ${name}`,
                    base: "Base transparente incluida",
                    edicion: "Edici√≥n limitada",
                    estado: "Nuevo en caja original",
                    garantia: "Garant√≠a de 30 d√≠as"
                }
            }));
            
            return addBulkProducts(newProducts);
        }

        // ===== FUNCIONES DE INTERFAZ DE USUARIO =====
        
        // Funci√≥n para actualizar la interfaz cuando el usuario est√° logueado
        function updateUIForLoggedUser(user) {
            // Actualizar bot√≥n de login por bot√≥n de perfil
            const loginBtn = document.querySelector('.login-btn');
            if (loginBtn) {
                loginBtn.innerHTML = `
                    <span>üë§ ${user.firstName}</span>
                    <div class="user-dropdown">
                        <a href="#" onclick="showUserProfile()">Mi Perfil</a>
                        <a href="#" onclick="showUserOrders()">Mis Pedidos</a>
                        <a href="#" onclick="logoutUser()">Cerrar Sesi√≥n</a>
                    </div>
                `;
                loginBtn.classList.add('user-logged-in');
            }
            
            // Mostrar mensaje de bienvenida
            console.log(`Usuario logueado: ${user.firstName} ${user.lastName}`);
        }
        
        // Funci√≥n para actualizar la interfaz cuando no hay usuario logueado
        function updateUIForGuest() {
            const loginBtn = document.querySelector('.login-btn');
            if (loginBtn) {
                loginBtn.innerHTML = 'Iniciar Sesi√≥n';
                loginBtn.classList.remove('user-logged-in');
            }
        }
        
        // Funci√≥n para mostrar perfil de usuario
        function showUserProfile() {
            if (!currentUser) return;
            
            const profileData = `
                üë§ <strong>${currentUser.firstName} ${currentUser.lastName}</strong>
                üìß ${currentUser.email}
                üì± ${currentUser.phone || 'No especificado'}
                üìç ${currentUser.address || 'No especificado'}
                üèôÔ∏è ${currentUser.city || 'No especificado'}
                üì¶ Pedidos: ${currentUser.orders.length}
                ‚ù§Ô∏è Lista de deseos: ${currentUser.wishlist.length} items
            `;
            
            alert(`üìã <strong>Mi Perfil</strong>\n\n${profileData}`);
        }
        
        // Funci√≥n para mostrar pedidos del usuario
        function showUserOrders() {
            if (!currentUser) return;
            
            if (currentUser.orders.length === 0) {
                alert('üì¶ No tienes pedidos a√∫n\n\n¬°Explora nuestros productos!');
                return;
            }
            
            let ordersText = 'üì¶ <strong>Mis Pedidos</strong>\n\n';
            currentUser.orders.forEach((order, index) => {
                ordersText += `${index + 1}. Pedido #${order.id}\n`;
                ordersText += `   Fecha: ${new Date(order.date).toLocaleDateString()}\n`;
                ordersText += `   Total: ${formatPrice(order.total)}\n`;
                ordersText += `   Estado: ${order.status}\n\n`;
            });
            
            alert(ordersText);
        }
        
        // Funci√≥n para cerrar sesi√≥n
        function logoutUser() {
            if (confirm('¬øEst√°s seguro de que quieres cerrar sesi√≥n?')) {
                currentUser = null;
                localStorage.removeItem('tienda_current_user');
                updateUIForGuest();
                alert('üëã ¬°Hasta luego!');
            }
        }
        
        // Funci√≥n para mostrar usuarios registrados (solo para desarrollo)
        function showRegisteredUsers() {
            if (users.length === 0) {
                alert('üìù No hay usuarios registrados a√∫n\n\n¬°Crea tu primera cuenta!');
                return;
            }
            
            let usersText = 'üë• <strong>Usuarios Registrados</strong>\n\n';
            users.forEach((user, index) => {
                usersText += `${index + 1}. ${user.firstName} ${user.lastName}\n`;
                usersText += `   üìß ${user.email}\n`;
                usersText += `   üìÖ Registrado: ${new Date(user.dateRegistered).toLocaleDateString()}\n`;
                usersText += `   üì¶ Pedidos: ${user.orders.length}\n\n`;
            });
            
            alert(usersText);
        }
        
        // Funci√≥n para crear usuario de prueba
        function createTestUser() {
            try {
                const testUser = registerUser({
                    firstName: 'Usuario',
                    lastName: 'Prueba',
                    email: 'test@email.com',
                    password: '123456',
                    phone: '+57 300 000 0000'
                });
                
                alert(`‚úÖ Usuario de prueba creado:\n\nEmail: test@email.com\nContrase√±a: 123456\n\n¬°Ya puedes hacer login!`);
            } catch (error) {
                alert('‚ùå Error: ' + error.message);
            }
        }

        // ===== FUNCIONES DEL PANEL DE ADMINISTRACI√ìN =====
        
        function toggleAdminPanel() {
            const panel = document.getElementById('adminPanel');
            panel.style.display = panel.style.display === 'none' ? 'flex' : 'none';
        }

        function showAdminTab(tabName) {
            // Ocultar todos los tabs
            document.querySelectorAll('.admin-tab-content').forEach(tab => {
                tab.style.display = 'none';
            });
            
            // Remover clase active de todos los tabs
            document.querySelectorAll('.admin-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Mostrar tab seleccionado
            document.getElementById(tabName + 'Tab').style.display = 'block';
            
            // Activar tab button
            event.target.classList.add('active');
            
            // Si es el tab de usuarios, cargar datos
            if (tabName === 'users') {
                loadUsersData();
            }
        }

        function toggleDevTools() {
            const devTools = document.getElementById('devTools');
            const isVisible = devTools.style.display !== 'none';
            devTools.style.display = isVisible ? 'none' : 'block';
        }

        function toggleSupabaseConfig() {
            const config = prompt(`üêò Configuraci√≥n de Supabase (PostgreSQL)

Reemplaza estos valores con los de tu proyecto Supabase:

url: 'https://tu-proyecto.supabase.co',
anonKey: 'tu-anon-key'

¬øQuieres activar Supabase? (s√≠/no):`);

            if (config && config.toLowerCase().includes('s√≠')) {
                useSupabase = true;
                updateSupabaseStatus();
                alert('‚úÖ Supabase activado!\n\nAhora necesitas:\n1. Crear proyecto en Supabase.com\n2. Crear tabla "users" en SQL Editor\n3. Reemplazar la configuraci√≥n en el c√≥digo\n4. Habilitar Authentication');
            }
        }

        function updateSupabaseStatus() {
            const statusElement = document.getElementById('supabaseStatus');
            if (useSupabase && checkSupabase()) {
                statusElement.textContent = '‚úÖ Configurado y funcionando';
                statusElement.style.color = '#28a745';
            } else if (useSupabase) {
                statusElement.textContent = '‚ö†Ô∏è Activado pero no configurado';
                statusElement.style.color = '#ffc107';
            } else {
                statusElement.textContent = '‚ùå No configurado';
                statusElement.style.color = '#dc3545';
            }
        }

        function loadUsersData() {
            // Actualizar estad√≠sticas
            const totalUsers = users.length;
            const totalOrders = users.reduce((sum, user) => sum + user.orders.length, 0);
            const totalRevenue = users.reduce((sum, user) => {
                return sum + user.orders.reduce((userSum, order) => userSum + order.total, 0);
            }, 0);

            document.getElementById('totalUsers').textContent = totalUsers;
            document.getElementById('totalOrders').textContent = totalOrders;
            document.getElementById('totalRevenue').textContent = formatPrice(totalRevenue);

            // Cargar tabla de usuarios
            const tbody = document.getElementById('usersTableBody');
            tbody.innerHTML = '';

            users.forEach(user => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${user.id}</td>
                    <td>${user.firstName} ${user.lastName}</td>
                    <td>${user.email}</td>
                    <td>${user.phone || 'No especificado'}</td>
                    <td>${user.city || 'No especificado'}</td>
                    <td>${user.orders.length}</td>
                    <td>${new Date(user.dateRegistered).toLocaleDateString()}</td>
                    <td class="user-actions">
                        <button class="btn-small btn-view" onclick="viewUserDetails(${user.id})">Ver</button>
                        <button class="btn-small btn-edit" onclick="editUser(${user.id})">Editar</button>
                        <button class="btn-small btn-delete" onclick="deleteUser(${user.id})">Eliminar</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function viewUserDetails(userId) {
            const user = users.find(u => u.id === userId);
            if (!user) return;

            const details = `
                üë§ <strong>${user.firstName} ${user.lastName}</strong>
                üìß Email: ${user.email}
                üì± Tel√©fono: ${user.phone || 'No especificado'}
                üìç Direcci√≥n: ${user.address || 'No especificado'}
                üèôÔ∏è Ciudad: ${user.city || 'No especificado'}
                üìÆ C√≥digo Postal: ${user.postalCode || 'No especificado'}
                üåç Pa√≠s: ${user.country || 'No especificado'}
                üìÖ Registrado: ${new Date(user.dateRegistered).toLocaleString()}
                üì¶ Pedidos: ${user.orders.length}
                ‚ù§Ô∏è Lista de deseos: ${user.wishlist.length} items
                üìß Newsletter: ${user.preferences.newsletter ? 'S√≠' : 'No'}
                üîî Notificaciones: ${user.preferences.notifications ? 'S√≠' : 'No'}
            `;

            alert(`üìã <strong>Detalles del Usuario</strong>\n\n${details}`);
        }

        function editUser(userId) {
            const user = users.find(u => u.id === userId);
            if (!user) return;

            const newPhone = prompt('Nuevo tel√©fono:', user.phone || '');
            if (newPhone !== null) {
                updateUserProfile(userId, { phone: newPhone });
                loadUsersData();
                alert('‚úÖ Usuario actualizado correctamente');
            }
        }

        function deleteUser(userId) {
            const user = users.find(u => u.id === userId);
            if (!user) return;

            if (confirm(`¬øEst√°s seguro de eliminar a ${user.firstName} ${user.lastName}?\n\nEsta acci√≥n no se puede deshacer.`)) {
                const userIndex = users.findIndex(u => u.id === userId);
                if (userIndex !== -1) {
                    users.splice(userIndex, 1);
                    saveUsers();
                    loadUsersData();
                    alert('‚úÖ Usuario eliminado correctamente');
                }
            }
        }

        function addBulkFromNames() {
            const namesText = document.getElementById('bulkNames').value;
            const category = document.getElementById('bulkCategory').value;
            const basePrice = parseFloat(document.getElementById('bulkPrice').value);
            
            if (!namesText.trim()) {
                alert('‚ö†Ô∏è Por favor ingresa al menos un nombre de figura');
                return;
            }
            
            const names = namesText.split('\n').filter(name => name.trim());
            const added = createProductsFromNames(names, category, basePrice);
            
            alert(`‚úÖ Se agregaron ${added} figuras exitosamente`);
            
            // Limpiar formulario
            document.getElementById('bulkNames').value = '';
        }

        function addSingleProduct() {
            const name = document.getElementById('singleName').value;
            const price = parseFloat(document.getElementById('singlePrice').value);
            const category = document.getElementById('singleCategory').value;
            const image = document.getElementById('singleImage').value;
            const description = document.getElementById('singleDescription').value;
            
            if (!name.trim()) {
                alert('‚ö†Ô∏è Por favor ingresa el nombre de la figura');
                return;
            }
            
            const newProduct = {
                name: name,
                description: description || `Figura ${category.toUpperCase()} de ${name} - Colecci√≥n oficial`,
                price: price,
                image: image || `${name.replace(/\s+/g, '_').toLowerCase()}.jpg`,
                images: [
                    image || `${name.replace(/\s+/g, '_').toLowerCase()}.jpg`,
                    `${name.replace(/\s+/g, '_').toLowerCase()}_espalda.jpg`
                ],
                category: category,
                characteristics: {
                    material: "PVC de alta calidad",
                    altura: "8-10 cm",
                    pintura: "Pintura oficial",
                    detalles: `Detalles √∫nicos de ${name}`,
                    base: "Base transparente incluida",
                    edicion: "Edici√≥n limitada",
                    estado: "Nuevo en caja original",
                    garantia: "Garant√≠a de 30 d√≠as"
                }
            };
            
            const added = addBulkProducts([newProduct]);
            alert(`‚úÖ Se agreg√≥ "${name}" exitosamente`);
            
            // Limpiar formulario
            document.getElementById('singleName').value = '';
            document.getElementById('singleDescription').value = '';
            document.getElementById('singleImage').value = '';
        }

        function importFromJSON() {
            const jsonText = document.getElementById('jsonImport').value;
            
            if (!jsonText.trim()) {
                alert('‚ö†Ô∏è Por favor pega el JSON de productos');
                return;
            }
            
            try {
                const productData = JSON.parse(jsonText);
                
                if (!Array.isArray(productData)) {
                    alert('‚ö†Ô∏è El JSON debe ser un array de productos');
                    return;
                }
                
                const added = addProductsFromArray(productData);
                alert(`‚úÖ Se importaron ${added} productos exitosamente`);
                
                // Limpiar formulario
                document.getElementById('jsonImport').value = '';
                
            } catch (error) {
                alert('‚ùå Error en el JSON: ' + error.message);
            }
        }

        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const href = this.getAttribute('href');
                if (href && href !== '#') {
                    const target = document.querySelector(href);
                    if (target) { 
                        target.scrollIntoView({ behavior: 'smooth' }); 
                    }
                }
            });
        });
    </script>
</body>
</html>

